function ItemContextMenuCL(n,t){var i=this;this.ID=n.id||SUtil.GetRadomKeyPlus("imu");this.html=n.html||"";this.IconFrontHtml=n.iconFront||"";this.Func=n.func||null;this.IconEndHtml=n.iconEnd||"";this.Class=n.class||"";this.CloseAfterClick=SUtil.Default(n.closeAfterClick,!0);this.Visible=n.Visible||!0;this.type=n.type||"item";this.JSender=null;this.Parent=t;this.Set=function(n){n.Visible!==undefined&&(this.Visible=n.Visible,this.Visible?this.JSender.css("display","table-row"):this.JSender.css("display","none"));n.html!==undefined&&(this.html=n.html,document.getElementById(`item-menu-${this.ID}`).innerHTML=this.html)};this.Render=function(n){if(this.JSender===null)if(this.type=="item"){let t=`<tr class="item ${this.Class}" id="${this.ID}">
                                <td role="iconFront">${this.IconFrontHtml}</td>
                                <td role="name" id="item-menu-${this.ID}">${this.html}</td>
                                <td role="iconEnd">${this.IconEndHtml}</td>
                            </tr>`;n.append(t);this.JSender=SUtil.J(this.ID);this.JSender.mouseenter(function(n){i.MouseFocus(n)});this.JSender.click(function(){i.Func!==null&&i.Func();i.CloseAfterClick&&i.Parent.CloseAll()})}else if(this.type=="line"){let t=`<tr class="space"><td colspan="3"></td></tr>
                              <tr class="line" id="${this.ID}"><td colspan="3"></td></tr>
                              <tr class="space"><td colspan="3"></td></tr>`;n.append(t);this.JSender=SUtil.J(this.ID)}else if(this.type=="text"){let t=`<tr class="${this.Class}" id="${this.ID}"><td colspan="3">${this.html}</td></tr>`;n.append(t);this.JSender=SUtil.J(this.ID)}};this.MouseFocus=function(){var n=this.Parent.GetSize(),i=this.JSender.position(),t=n.x+n.width+1,r=n.y+i.top+1,u=$(window).width();t+n.width>u&&(t=n.x-(n.width+1));this.Parent.MouseFocusItem(this);this.MapContextMenu!==null&&this.MapContextMenu.Open(t+20,r)};this.LostFocus=function(){this.MapContextMenu!==null&&this.MapContextMenu.Close()};this.MapContextMenu=n.mapContextMenu||null}function ContextMenuCL(n){var u=this,t,r,i,f;if(ContextMenuLst.push(this),this.ID=n.id||SUtil.GetRadomKeyPlus("cme"),this.JSender=null,this.JContainer=null,this.Position={x:0,y:0},this.size=n.size||{width:"auto",height:"auto"},t="sct-menu-bg",this.JBackGround=SUtil.J(t),this.JBackGround.length===0&&($("body").append(String.format('<div id="{0}"><\/div>',t)),this.JBackGround=SUtil.J(t),this.JBackGround.click(function(n){var i=$(".sct-menu"),t;if(!i.is(n.target)&&i.has(n.target).length===0)for(u.JBackGround.hide(),t=0;t<ContextMenuLst.length;t++)ContextMenuLst[t].Close()}),this.JBackGround.bind("contextmenu",function(){return!1}),$(document).click(function(n){if(n.button===0){u.JBackGround.hide();for(var t=0;t<ContextMenuLst.length;t++)ContextMenuLst[t].Close()}}),$(document).bind("contextmenu",function(){return!1})),this.Items=[],n.items!==undefined)for(r=n.items,i=0;i<r.length;i++)f=new ItemContextMenuCL(r[i],this),this.Items.push(f);this.Render=function(){var t,n;for(this.JSender=SUtil.J(this.ID),this.JSender.length===0&&(t=`<div id="${this.ID}" style="width: ${this.size.width}; height: ${this.size.height}" class="sct-menu">
                                <table id="tb${this.ID}"></table>
                            <div>`,$("body").append(t),this.JSender=SUtil.J(this.ID),this.JContainer=SUtil.J("tb"+this.ID)),n=0;n<this.Items.length;n++)this.Items[n].Render(this.JContainer)};this.Render();this.Active=!1;this.Open=function(n,t){this.JSender.show();var i=$(window).width(),r=$(window).height(),u=11,f=this.JSender.width()+u*2,e=this.JSender.height()+u*2;n+f>i&&(n=i-f);t+e>r&&(t=r-e);this.Position.x=n;this.Position.y=t;this.JSender.css({left:n+"px",top:t+"px"});this.Active=!0;this.JSender.show()};this.Close=function(){this.JSender.hide();this.Active=!1;for(var n=0;n<ContextMenuLst.length;n++)if(ContextMenuLst[n].Active)return;this.JSender.hide()};this.CloseAll=function(){for(var n=0;n<ContextMenuLst.length;n++)ContextMenuLst[n].Active=!1,ContextMenuLst[n].JSender.hide();this.JBackGround.hide()};this.MouseFocusItem=function(n){for(var t=0;t<this.Items.length;t++)this.Items[t]!==n&&this.Items[t].LostFocus()};this.GetSize=function(){var n=this.JSender.position(),t=this.JSender.width(),i=this.JSender.height();return{x:n.left,y:n.top,width:t,height:i}}}function DatePickerCL(n){this.format=SUtil.Default(n.format,"MM/dd/yyyy");this.placeholder=SUtil.Default(n.placeholder,this.format);this.id=SUtil.Default(n.id,SUtil.AutoElementId());this.parentId=SUtil.Default(n.parentId,"body");this.dateDefault=SUtil.Default(n.date,null);this.maxDate=SUtil.Default(n.maxDate,new Date(2050,0,1,0,0,0));this.minDate=SUtil.Default(n.minDate,new Date(1900,0,1,0,0,0));this.direct=0;DatePickerCL.register(this);this.view={year:2020,month:0,date:1,hour:0,minute:0,second:0};this.date={year:2020,month:0,date:10,hour:0,minute:0,second:0};this.createHtmlInput=function(){let n="";this.dateDefault!==null&&(n=TimeUtil.dateToText(this.dateDefault,this.format));var t=`
            <div class="input-group mb-3 datetime-piker" id="${this.id}">
                <input type="text" id="${this.id}_input" class="form-control form-control-sm" placeholder="${this.placeholder}" value="${n}" onblur="DatePickerCL.onblur('${this.id}')">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary btn-sm btn-calendar" style="border-color: #ccc" type="button" onclick="DatePickerCL.open(event,'${this.id}')">
                        <i class="fas fa-calendar-alt"></i>
                    </button>
                </div>
            </div>
        `;document.getElementById(this.parentId).innerHTML=t;document.getElementById(this.parentId).style.position="relative"};this.createHtmlPopup=function(){var u,f,e,o,i,s,h,n,r;let t=this.format.toLowerCase();if(u="",t.indexOf("yyyy")>=0){f="";e=["January","February","March","April","May","June","July","August","September","October","Novemeber","Decemeber"];for(let n=0;n<e.length;n++)i=n==this.view.month?"selected":"",f+=`<option value="${n}" ${i}>${e[n]}</option>`;o="";let n=this.maxDate.getFullYear();for(let t=this.minDate.getFullYear();t<=n;t++)i=t==this.view.year?"selected":"",o+=`<option value="${t}" ${i}>${t}</option>`;u=`
                <div class="_dYM">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <button class="btn btn-light btn-sm" type="button" onclick="DatePickerCL.nextView('${this.id}', -1)"><i class="fas fa-chevron-left"></i></button>
                        </div>
                        <select class="form-control form-control-sm" onchange="DatePickerCL.changeViewMonth('${this.id}', this)" style="width:70px">
                           ${f}
                        </select>
                        <select class="form-control form-control-sm"  onchange="DatePickerCL.changeViewYear('${this.id}', this)">
                            ${o}
                        </select>
                        <div class="input-group-append">
                            <button class="btn btn-light  btn-sm" type="button" onclick="DatePickerCL.nextView('${this.id}', 1)"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                </div>
                `}if(s="",t.indexOf("dd")>=0){h="";let t=1;var v=new Date(this.view.year,this.view.month,1),y=new Date(this.view.year,this.view.month+1,0),c=v.getDay();let i=new Date,r=this.minDate.getTime(),u=this.maxDate.getTime();for(let n=0;n<6;n++){let n="";for(let f=0;f<7;f++)if(c===0){if(t>y.getDate())break;var p=this.date.date===t&&this.date.year===this.view.year&&this.date.month==this.view.month?1:0,w=i.getDate()===t&&i.getFullYear()===this.view.year&&i.getMonth()==this.view.month?1:0,l=new Date(this.view.year,this.view.month,t,0,0,0).getTime();n+=l>=r&&l<=u?`<td><button type="button" data-selected="${p}"  data-current="${w}" onclick="DatePickerCL.chooseDate('${this.id}', ${t})">${t}</button></td>`:`<td data-disabled="true">${t}</td>`;t++}else n+="<td>&nbsp;<\/td>",c--;h+=`<tr>${n}</tr>`}n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];s=`
                <div class="_dD" style="min-height:175px">
                    <table>
                        <tr>
                            <th>${n[0]}</th>
                            <th>${n[1]}</th>
                            <th>${n[2]}</th>
                            <th>${n[3]}</th>
                            <th>${n[4]}</th>
                            <th>${n[5]}</th>
                            <th>${n[6]}</th>
                        </tr>
                        ${h}
                    </table>
                </div>
            `}r="";t.indexOf("hh:mm:ss")>=0?r=`            
                <div class="_dTIME">
                    <table>
                        <tr>
                            <td>
                                <input type="number" class="form-control form-control-sm" min="0" max="23" value="${this.date.hour}" id="${this.id}_hour" onchange="DatePickerCL.updateTime('${this.id}')" /></td>
                            <td>:</td>
                            <td>
                                <input type="number" class="form-control form-control-sm" min="0" max="59" value="${this.date.minute}"  id="${this.id}_minute"  onchange="DatePickerCL.updateTime('${this.id}')"/></td>
                            <td>:</td>
                            <td>
                                <input type="number" class="form-control form-control-sm" min="0" max="59" value="${this.date.second}"  id="${this.id}_second"  onchange="DatePickerCL.updateTime('${this.id}')"/></td>
                        </tr>
                    </table>
                </div>`:t.indexOf("hh:mm")>=0&&(r=`            
                <div class="_dTIME">
                    <table>
                        <tr>
                            <td>
                                <input type="number" class="form-control form-control-sm" min="0" max="23" value="${this.date.hour}" id="${this.id}_hour" onchange="DatePickerCL.updateTime('${this.id}')" /></td>
                            <td>:</td>
                            <td>
                                <input type="number" class="form-control form-control-sm" min="0" max="59" value="${this.date.minute}"  id="${this.id}_minute"  onchange="DatePickerCL.updateTime('${this.id}')"/></td>
                        </tr>
                    </table>
                </div>`);var a=new Date(this.date.year,this.date.month,this.date.date,this.date.hour,this.date.minute,this.date.second),b=a.getFullYear()>=1900?TimeUtil.dateToText(a,this.format):"&nbsp;",k=`
                        <div class="_lbValue">
                            <p id="${this.id}_result">${b}</p>
                        </div>

                        <div class="_btns">
                            <button class="btn btn-cobalt-primary btn-sm" type="button" onclick="DatePickerCL.done('${this.id}')">Done</button>
                            <button class="btn btn-cobalt-primary btn-sm" type="button" onclick="DatePickerCL.close('${this.id}')">Cancel</button>
                        </div>

                    `;if(document.getElementById(this.id+"_extend")==null){let n=document.createElement("div");n.setAttribute("class","datePickerCL");n.setAttribute("id",this.id+"_extend");n.setAttribute("onclick","DatePickerCL.stopClick(event)");document.getElementById(this.parentId).appendChild(n)}document.getElementById(this.id+"_extend").innerHTML=u+s+r+k;document.getElementById(this.id+"_extend").setAttribute("data-direct",this.direct)};this.createHtmlInput();this.onblur=function(){try{let t=document.getElementById(`${this.id}_input`).value;if(t==="")return;let n=TimeUtil.textToDate(t,this.format);n!==null?(n.getTime()>this.maxDate.getTime()&&(n=this.maxDate),n.getTime()<this.minDate.getTime()&&(n=this.minDate),document.getElementById(`${this.id}_input`).value=TimeUtil.dateToText(n,this.format)):document.getElementById(`${this.id}_input`).value=""}catch(n){document.getElementById(`${this.id}_input`).value=""}};this.getNumber=function(n=false){try{this.onblur();var t=document.getElementById(`${this.id}_input`).value;if(t=="")return"0";let i=TimeUtil.textToDate(t,this.format);return n?TimeUtil.DateToTextNumberUTC(i):TimeUtil.DateToTextNumber(i)}catch(i){}return"0"};this.getDate=function(){var n=document.getElementById(`${this.id}_input`).value;return n==""?null:TimeUtil.textToDate(n,this.format)};this.set=function(n){try{if(n.date!==undefined&&(n.date!==null?document.getElementById(`${this.id}_input`).value=TimeUtil.dateToText(n.date,this.format):document.getElementById(`${this.id}_input`).value=""),n.enable!==undefined){this.enable=n.enable;let t=document.getElementById(this.id),i=t.getElementsByTagName("input"),r=t.getElementsByTagName("button");this.enable?(i[0].removeAttribute("disabled"),r[0].removeAttribute("disabled")):(i[0].setAttribute("disabled","disabled"),r[0].setAttribute("disabled","disabled"))}n.maxDate!==undefined&&(this.maxDate=n.maxDate);n.minDate!==undefined&&(this.minDate=n.minDate)}catch(t){console.log(t)}};this.chooseDate=function(n){this.date.year=this.view.year;this.date.month=this.view.month;this.date.date=n;this.createHtmlPopup()};this.nextView=function(n){var t=new Date(this.view.year,this.view.month,1);t.setMonth(t.getMonth()+n);t.getTime()>this.maxDate.getTime()&&(t=this.maxDate);t.getTime()<this.minDate.getTime()&&(data=this.minDate);this.view.year=t.getFullYear();this.view.month=t.getMonth();this.createHtmlPopup()};this.changeViewYear=function(n){this.view.year=n;this.createHtmlPopup()};this.changeViewMonth=function(n){this.view.month=n;this.createHtmlPopup()};this.updateTime=function(){function n(n,t){try{return n=parseInt(n),n>t&&(n=t),isNaN(n)&&(n=0),n}catch(i){return 0}}var r=document.getElementById(this.id+"_hour").value,u=document.getElementById(this.id+"_minute").value,i=0,t;document.getElementById(this.id+"_second")!==null&&(i=document.getElementById(this.id+"_second").value);this.date.hour=n(r);this.date.minute=n(u);this.date.second=n(i);t=new Date(this.date.year,this.date.month,this.date.date,this.date.hour,this.date.minute,this.date.second);document.getElementById(this.id+"_result").innerHTML=t.getFullYear()>=1900?TimeUtil.dateToText(t,this.format):"&nbsp;"};this.close=function(){document.getElementById(`${this.id}_extend`)!==null&&document.getElementById(`${this.id}_extend`).remove()};this.open=function(n){var i=n.clientY;this.direct=i+300>window.innerHeight?1:0;let t=this.getDate();t==null&&(t=new Date);let r=t.getFullYear()<1900?1900:t.getFullYear();this.date.year=this.view.year=r;this.date.month=this.view.month=t.getMonth();this.date.date=this.view.date=t.getDate();this.date.hour=this.view.hour=t.getHours();this.date.minute=this.view.minute=t.getMinutes();this.date.second=this.view.second=t.getSeconds();this.createHtmlPopup()};this.done=function(){var n=new Date(this.date.year,this.date.month,this.date.date,this.date.hour,this.date.minute,this.date.second);n.getFullYear()>=1900?document.getElementById(`${this.id}_input`).value=TimeUtil.dateToText(n,this.format):document.getElementById(`${this.id}_input`).value="";this.close()};this.clickOustside=function(n){var i=document.getElementById(`${this.id}`),t=n.target;do{if(t==i)return;t=t.parentNode}while(t);this.close()};this.clean=function(){let n=new Date;this.view.year=n.getFullYear();this.view.month=n.getMonth();this.view.date=n.getDate();this.view.hour=n.getHours();this.view.minute=n.getMinutes();this.view.second=n.getSeconds();this.date.year=0;this.date.month=0;this.date.date=0;this.date.hour=0;this.date.minute=0;this.date.second=0;this.createHtmlPopup()}}function LNG_ENTRYCL(n,t){this.Name=n;this.Text=t}function LNG_SECTIONCL(n){var t,i,r;for(this.Name=n.getAttribute("name"),this.Entries=[],t=0;t<n.children.length;t++)i=n.children[t].getAttribute("name"),r=new LNG_ENTRYCL(i,n.children[t].innerHTML),this.Entries.push(r);this.GetLNG_ENTRYCLByKey=function(n){for(var t=0;t<this.Entries.length;t++)if(this.Entries[t].Name===n)return this.Entries[t];return null}}function ModalCL(n){this.id=SUtil.Default(n.id,SUtil.AutoElementId());this.buttons=SUtil.Default(n.buttons,null);this.title=SUtil.Default(n.title,"");this.type=SUtil.Default(n.type,DIALOG.TYPE.MESSAGE);this.html=SUtil.Default(n.html,"");this.include=SUtil.Default(n.include,"");this.onOpen=SUtil.Default(n.onOpen,null);this.onClose=SUtil.Default(n.onClose,null);this.iframe=SUtil.Default(n.iframe,null);this.render=function(){var s=`<div class="modal-header">
                <h5 class="modal-title" id="${this.id}Title">${this.title}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&#x2715</span>
                </button>
            </div>`,u="",t,e,i,r,o,f,n;if(this.iframe===null)t="",this.include===""?t=this.html:(n=document.getElementById(this.include),n===null?console.log("render: not found "+this.include):(e=n.cloneNode(!0),n.parentNode.removeChild(n),t=e.innerHTML)),u=`<div class="modal-body">${t}</div>`;else{var h=SUtil.Default(this.iframe.height,"300px"),c=SUtil.Default(this.iframe.src,"#"),l=SUtil.Default(this.iframe.id,SUtil.GetRadomKey("iframe")),t=`<iframe src="${c}" id="${l}" class="iframeFull" style="height: ${h}"></iframe>`;u=`<div class="modal-body" style='padding: 0px'>${t}</div>`}if(i="",this.buttons!=null){r="";for(let n=0;n<this.buttons.length;n++){let t=this.buttons[n],i=t.closeAfterClick?'data-dismiss="modal"':"";r+=`<button type="button" class="${t.class}" ${i} onclick="DIALOG.btnFooterClick('${this.id}', ${n})">${t.html}</button>`}r.length>0&&(i=`<div class="modal-footer justify-content-between">${r}</div>`)}else i=`<div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-cobalt-primary" data-dismiss="modal">Close</button>
                </div>`;o=`<div class="modal fade ${this.type}" id="${this.id}" role="dialog" aria-labelledby="${this.id}Title" aria-hidden="true">
                <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
                    <div class="modal-content">
                        ${s}
                        ${u}
                        ${i}
                    </div>
                </div>
            </div>`;f=document.createElement("div");f.innerHTML=o;document.getElementsByTagName("body")[0].appendChild(f);n=$("#"+this.id);n.on("hidden.bs.modal",function(n){try{var t=DIALOG.find(n.currentTarget.id);t.onClose!==null&&t.onClose()}catch(n){}});n.on("shown.bs.modal",function(n){try{var t=DIALOG.find(n.currentTarget.id);t.onOpen!==null&&t.onOpen()}catch(n){}})};this.open=function(){document.getElementById(this.id)===null&&this.render();var n=$("#"+this.id);n.modal({backdrop:"static",keyboard:!0,show:!0})};this.close=function(){var n=$("#"+this.id);n.modal("hide")};DIALOG.data.push(this)}function ButtonCL(n){this.html=SUtil.Default(n.html,"");this.class=SUtil.Default(n.class,"btn btn-cobalt-primary");this.callback=SUtil.Default(n.callback,null);this.closeAfterClick=SUtil.Default(n.closeAfterClick,!0);this.visible=SUtil.Default(n.visible,!0)}function MultichkItemCL(n){this.id=SUtil.GetRadomKeyPlus("smulsel-a");this.parentid=null;this.text="";this.tag=null;this.func=null;this.check=0;this.disable=!1;this.display=!0;this.Refresh=function(){SUtil.J(this.id).replaceWith(this.Render())};this.Set=function(n){n.id!==undefined&&(this.id=n.id);n.parentid!==undefined&&(this.parentid=n.parentid);n.text!==undefined&&(this.text=n.text);n.tag!==undefined&&(this.tag=n.tag);n.func!==undefined&&(this.func=n.func);n.check!==undefined&&(this.check=n.check);n.disable!==undefined&&(this.disable=n.disable);n.display!==undefined&&(this.display=n.display);n.refresh===!0&&this.Refresh()};this.Set(n);this.Html='<tr id="{0}" data-check="{4}" onclick="GMultiselect.ClickItem(\'{3}\',\'{0}\')">                     <td data-role="chk">{1}<\/td>                     <td data-role="text">{2}<\/td>                 <\/tr>';this.Render=function(){var n="";switch(this.check){case 0:n='<i class="far fa-square"><\/i>';break;case 1:n='<i class="fas fa-check-square"><\/i>';break;case 2:n='<i class="far fa-minus-square"><\/i>';break;default:n='<i class="far fa-square"><\/i>'}return String.format(this.Html,this.id,n,this.text,this.parentid,this.check)};this.Click=function(n){this.check=n===undefined?this.check===1||this.check===2?0:1:n;this.Refresh();this.func!==null&&this.func(this)}}function MultichkDropDownCL(n){var t=this;this.ID=GMultiselect.Add(t);this.JElement=n.elementid!==undefined?SUtil.J(n.elementid):$("body");this.JElement.addClass("multichkDropDown");this.JContent=SUtil.J(this.ID);this.Extend=!1;this.Items=[];this.ChkALL=null;this.MaxCharNumber=40;this.PleaseSelect=LNG.GetValue("multiselect","pleaseselect","Please Select...");this.OnChange=null;this.Set=function(n){var i=0,r;if(n.maxCharNumber!==undefined&&(this.MaxCharNumber=n.maxCharNumber),n.items!==undefined)for(i=0;i<n.items.length;i++)n.items[i].id=this.ID+"i-"+i.toString(),n.items[i].parentid=this.ID,this.Items.push(new MultichkItemCL(n.items[i]));if(n.chkALL!==undefined){for(r=n.chkALL,i=0;i<this.Items.length;i++)this.Items[i].check=r.check;this.ChkALL=new MultichkItemCL({text:SUtil.Default(r.text,"All"),check:r.check,parentid:this.ID,func:function(n){for(var i=0;i<t.Items.length;i++)t.Items[i].check!==n.check&&t.Items[i].Set({check:n.check,refresh:!0});r.func!==null&&r.func(n)}})}n.extend!==undefined&&(this.Extend=n.extend);n.pleaseSelext!==undefined&&(this.PleaseSelect=n.pleaseSelext);n.refresh===!0&&this.Render()};this.Set(n);this.Html={DivFull:'<section>                     <div>                         <table>                             <tbody id="{0}"><\/tbody>                         <\/table>                     <\/div>                     <button type="button" onclick="GMultiselect.Click(\'{0}\', false)" class="btn btn-default">                         <i class="fa fa-angle-up"><\/i>                     <\/button>                 <\/section>',DivMin:'<button type="button" onclick="GMultiselect.Click(\'{1}\', true)" class="btn btn-default">                     <table>                         <tr>                             <td data-role="text"><p>{0}<p><\/td>                             <td data-role="icon">                                 <i class="fas fa-angle-down"><\/i>                             <\/td>                         <\/tr>                     <\/table>                 <\/button>'};this.Render=function(){var n=0,i,f;if(this.JElement.empty(),this.Extend)for(this.JElement.html(String.format(this.Html.DivFull,this.ID)),i=SUtil.J(this.ID),this.ChkALL!==null&&i.append(this.ChkALL.Render()),n=0;n<this.Items.length;n++)i.append(this.Items[n].Render());else{var t="",r=0,u=0;for(n=0;n<this.Items.length;n++)this.Items[n].check===1&&(t.length+this.Items[n].text.length<=this.MaxCharNumber?t+=this.Items[n].text+", ":r++,u++);u===0?t="<i>"+this.PleaseSelect+"<\/i>":u===this.Items.length&&this.Items.length>0?t="ALL":(t=t.substring(0,t.length-2),r>0&&(t=t+String.format(LNG.GetValue("multiselect","moreselected","...and {0} selected."),r)));f=String.format(this.Html.DivMin,t,this.ID);this.JElement.append(f)}};this.Render();this.FindItemByID=function(n){for(var t=0;t<this.Items.length;t++)if(this.Items[t].id===n)return this.Items[t];return null};this.ItemClick=function(n){var u=this.FindItemByID(n),t,i,r;if(u!==null){if(u.Click(),this.ChkALL!==null){for(t=0,i=0;i<this.Items.length;i++)this.Items[i].check&&t++;r=0;r=t===0?0:t===this.Items.length?1:2;this.ChkALL.check!==r&&this.ChkALL.Set({check:r,refresh:!0})}}else this.ChkALL!==null&&n===this.ChkALL.id&&this.ChkALL.Click()}}function MultichkPopupCL(n){var t=this;this.ID=GMultiselect.Add(this);this.JElement=n.elementid!==undefined?SUtil.J(n.elementid):$("body");this.JElement.addClass("multichkPopup");this.JContent=SUtil.J(this.ID);this.Extend=!1;this.Items=[];this.ChkALL=null;this.MaxCharNumber=40;this.Title="Select";this.PleaseSelect=LNG.GetValue("multiselect","pleaseselect","Please Select...");this.OnChange=null;this.Set=function(n){var i=0,r;if(n.items!==undefined)for(i=0;i<n.items.length;i++)n.items[i].id=this.ID+i.toString(),n.items[i].parentid=this.ID,this.Items.push(new MultichkItemCL(n.items[i]));if(n.maxCharNumber!==undefined&&(this.MaxCharNumber=n.maxCharNumber),n.chkALL!==undefined){for(r=n.chkALL,i=0;i<this.Items.length;i++)this.Items[i].check=r.check;this.ChkALL=new MultichkItemCL({text:SUtil.Default(r.text,"All"),check:r.check,parentid:this.ID,func:function(n){for(var i=0;i<t.Items.length;i++)t.Items[i].check!==n.check&&t.Items[i].Set({check:n.check,refresh:!0});r.func!==null&&r.func(n)}})}if(n.resetoldcheck===!0){for(i=0;i<this.Items.length;i++)this.Items[i].check=this.Items[i].oldCheck;this.ChkALL!==null&&(this.ChkALL.check=this.ChkALL.oldCheck)}if(n.extend!==undefined&&(this.Extend=n.extend,this.Extend)){for(i=0;i<this.Items.length;i++)this.Items[i].oldCheck=this.Items[i].check;this.ChkALL!==null&&(this.ChkALL.oldCheck=this.ChkALL.check)}n.title!==undefined&&(this.Title=n.title);n.pleaseSelext!==undefined&&(this.PleaseSelect=n.pleaseSelext);n.refresh===!0&&this.Render()};this.Set(n);this.Html={DivFull:'<section>                     <div data-role="title">{1}<\/div>                     <div data-role="content" style="max-height:{2}px">                         <table><tbody id="{0}"><\/tbody><\/table>                     <\/div>                     <div data-role="footer">                         <button type="button" onclick="GMultiselect.ClickPopup(\'{0}\', true)" class="btn btn-primary"><i class="fa fa-check"><\/i> '+LNG.GetValue("button","apply","Apply")+'<\/button>                         <button type="button" onclick="GMultiselect.ClickPopup(\'{0}\', false)" class="btn btn-default"><i class="fa fa-times"><\/i> '+LNG.GetValue("button","cancel","Cancel")+"<\/button>                     <\/div>                <\/section >",DivMin:'<button type="button" onclick="GMultiselect.Click(\'{1}\', true)" class="btn btn-default">                     <table>                         <tr>                             <td data-role="text"><p>{0}<p><\/td>                             <td data-role="icon">                                 <i class="fas fa-angle-down"><\/i>                             <\/td>                         <\/tr>                     <\/table>                 <\/button>'};this.Render=function(){var n,f,e,i,o;if(this.JElement.empty(),n=0,this.Extend){for(f=SUtil.GetBrowserDim(),e=f.h-100,$("#mlMultichkBG").html(String.format(this.Html.DivFull,this.ID,this.Title,e)),i=SUtil.J(this.ID),this.ChkALL!==null&&i.append(this.ChkALL.Render()),n=0;n<this.Items.length;n++)i.append(this.Items[n].Render());$("#mlMultichkBG").css("display","flex")}var t="",r=0,u=0;for(n=0;n<this.Items.length;n++)this.Items[n].check===1&&(t.length+this.Items[n].text.length<=this.MaxCharNumber?t+=this.Items[n].text+", ":r++,u++);u===0?t="<i>"+this.PleaseSelect+"<\/i>":u===this.Items.length&&this.Items.length>0?t="ALL":(t=t.substring(0,t.length-2),r>0&&(t=t+String.format(LNG.GetValue("multiselect","moreselected","...and {0} selected."),r)));o=String.format(this.Html.DivMin,t,this.ID);this.JElement.append(o)};this.Render();this.FindItemByID=function(n){for(var t=0;t<this.Items.length;t++)if(this.Items[t].id===n)return this.Items[t];return null};this.ItemClick=function(n){var u=this.FindItemByID(n),t,i,r;if(u!==null){if(u.Click(),this.ChkALL!==null){for(t=0,i=0;i<this.Items.length;i++)this.Items[i].check&&t++;r=0;r=t===0?0:t===this.Items.length?1:2;this.ChkALL.check!==r&&this.ChkALL.Set({check:r,refresh:!0})}}else this.ChkALL!==null&&n===this.ChkALL.id&&this.ChkALL.Click()}}function SCHK_ITEM_CL(n){this.Id=SUtil.GetRadomKeyPlus("smulsel-a");this.SelectId=null;this.Text="";this.Tag=null;this.Func=null;this.Check=0;this.Disable=!1;this.Display=!0;this.Kind=GSELECT.KIND.CHECK;this.Refresh=function(){SUtil.J(this.Id).replaceWith(this.Render())};this.Set=function(n){n.Id!==undefined&&(this.Id=n.Id);n.SelectId!==undefined&&(this.SelectId=n.SelectId);n.Text!==undefined&&(this.Text=n.Text);n.Tag!==undefined&&(this.Tag=n.Tag);n.Func!==undefined&&(this.Func=n.Func);n.Check!==undefined&&(this.Check=n.Check);n.Disable!==undefined&&(this.Disable=n.Disable);n.Display!==undefined&&(this.Display=n.Display);n.Kind!==undefined&&(this.Kind=n.Kind);n.Refresh===!0&&this.Refresh()};this.Set(n);this.Html='<tr id="{0}" data-check="{4}" onclick="GSELECT.ClickItem(event,\'{3}\',\'{0}\')">                     <td data-role="chk">{1}<\/td>                     <td data-role="text">{2}<\/td>                 <\/tr>';this.Render=function(){if(!this.Display)return'<tr id="'+this.Id+'"><\/tr>';var n="";if(this.Kind===GSELECT.KIND.CHECK)switch(this.Check){case 0:n=GSELECT.ICON.UnCheck;break;case 1:n=GSELECT.ICON.Check;break;case 2:n=GSELECT.ICON.UnCheckALL;break;default:n=GSELECT.ICON.UnCheck}else switch(this.Check){case 0:n=GSELECT.ICON.UnCheckCircle;break;case 1:n=GSELECT.ICON.CheckCircle;break;default:n=GSELECT.ICON.UnCheckCircle}return String.format(this.Html,this.Id,n,this.Text,this.SelectId,this.Check)};this.Click=function(n){this.Check=n===undefined?this.Check===1||this.Check===2?0:1:n;this.Refresh();this.Func!==null&&this.Func(this)}}function SSELECT_BASE_CL(n){var t=this;this.ID=GSELECT.Add(t);this.JElement=n.Sender!==undefined?SUtil.J(n.Sender):$("body");this.JElement.addClass("SSELECT_CL");this.Kind=GSELECT.KIND.CHECK;this.JContent=SUtil.J(this.ID);this.Extend=!1;this.Items=[];this.ChkALL=null;this.MaxCharNumber=18;this.PleaseSelect=LNG.GetValue("multiselect","pleaseselect","Please Select...");this.TextEmpty="No Data Available";this.Type=GSELECT.TYPE.TOGGLE;this.Search=!1;this.Size={width:"100%",height:"250px"};this.OnChange=null;this.Set_Base=function(n){var i=0;if(n.MaxCharNumber!==undefined&&(this.MaxCharNumber=n.MaxCharNumber),n.Items!==undefined){for(this.Items=[],i=0;i<n.Items.length;i++)n.Items[i].Id=this.ID+"i-"+i.toString(),n.Items[i].SelectId=this.ID,this.Items.push(new SCHK_ITEM_CL(n.Items[i]));this.UpdateChkAll()}if(n.ChkALL!==undefined&&this.Kind===GSELECT.KIND.CHECK&&(this.ChkALL=new SCHK_ITEM_CL({Text:SUtil.Default(n.ChkALL.Text,"All"),Check:n.ChkALL.Check,SelectId:this.ID,Func:function(i){for(var r=0;r<t.Items.length;r++)t.Items[r].Display&&t.Items[r].Check!==i.Check&&t.Items[r].Set({Check:i.Check,Refresh:!0});n.ChkALL.Func!==null&&n.ChkALL.Func(i)}}),this.ChkALL.Check===0||this.ChkALL.Check===1))for(i=0;i<this.Items.length;i++)this.Items[i].Check=this.ChkALL.Check;n.Extend!==undefined&&(this.Extend=n.Extend);n.PleaseSelect!==undefined&&(this.PleaseSelect=n.PleaseSelect);n.TextEmpty!==undefined&&(this.TextEmpty=n.TextEmpty);n.Size!==undefined&&(this.Size=n.Size);n.Search!==undefined&&(this.Search=n.Search)};this.Html={Search:'<div class="_search"><input type="text" class="form-control" onkeyup="GSELECT.Filter(this,\'{0}\')" placeholder="Search"/><\/div>'};this.GetTextSelected=function(){var t;console.log("GetTextSelected");var n="",r=0,i=0;for(t=0;t<this.Items.length;t++)this.Items[t].Check===1&&(n.length+this.Items[t].Text.length<=this.MaxCharNumber?n+=this.Items[t].Text+", ":r++,i++);return i===0?n="<i>"+this.PleaseSelect+"<\/i>":i===this.Items.length&&this.Items.length>0?n="All":(n=n.substring(0,n.length-2),r>0&&(n=String.format(LNG.GetValue("multiselect","nselected","{0} Selected"),i))),n};this.FindItemByID=function(n){for(var t=0;t<this.Items.length;t++)if(this.Items[t].Id===n)return this.Items[t];return null};this.UpdateChkAll=function(){var t,r,n,i;if(this.ChkALL!==null){for(t=0,r=0,n=0;n<this.Items.length;n++)this.Items[n].Display&&(r++,this.Items[n].Check&&t++);i=0;i=t===0?0:t===r?1:2;this.ChkALL.Check!==i&&this.ChkALL.Set({Check:i,Refresh:!0})}};this.ItemClick=function(n){var i=this.FindItemByID(n),t;switch(this.Kind){case GSELECT.KIND.CHECK:i!==null?(i.Click(),this.UpdateChkAll()):this.ChkALL!==null&&n===this.ChkALL.Id&&this.ChkALL.Click();document.getElementById("lb-"+this.ID).innerHTML=this.GetTextSelected();break;case GSELECT.KIND.RADIO:if(i!==null)for(i.Click(),t=0;t<this.Items.length;t++)this.Items[t].Check!==0&&this.Items[t]!==i&&this.Items[t].Set({Check:0,Refresh:!0});document.getElementById("lb-"+this.ID).innerHTML=this.GetTextSelected()}};this.FilterKey="";this.Filter=function(n){var t,i;if(this.FilterKey!==n){for(this.FilterKey=n,t=0;t<this.Items.length;t++)i=this.Items[t].Text.toLowerCase().search(n)>=0?!0:!1,this.Items[t].Display!==i&&this.Items[t].Set({Display:i,Refresh:!0});this.UpdateChkAll()}};this.Click=null;this.CleanCheck=function(){this.Items.forEach(function(n){n.Check=0});this.UpdateChkAll();this.Render()}}function SSELECT_TOGGLE_CL(n){SSELECT_BASE_CL.call(this,n);this.DIALOG=null;this.Type=GSELECT.TYPE.TOGGLE;this.JElement.attr("data-t",this.Type);this.Html.Button=`<button type="button" onclick="GSELECT.Click(event,'{1}')" class="btn btn-default"> 
                            <table> 
                                <tr> 
                                    <td data-role="text" id="lb-{1}"><p>{0}<p></td> 
                                    <td data-role="icon">{2}</td> 
                                </tr> 
                            </table> 
                        </button>`;this.Html.DIV=`<section data-t="{1}" style="{2}" onclick="GSELECT.StopClick(event)"> 
                        {3}
                        <div class="_lst" data-s="{4}"> 
                            <table> 
                                <tbody id="{0}"></tbody> 
                            </table> 
                        </div> 
                    </section>`;this.Render=function(){var i,r,u,f,t,n;if(this.JElement.empty(),i=this.Extend?'<i class="fas fa-angle-up"><\/i>':'<i class="fas fa-angle-down"><\/i>',r=String.format(this.Html.Button,this.GetTextSelected(),this.ID,i),this.JElement.append(r),this.Extend!==!1)for(u=String.format("height: {0}; width: {1}",this.Size.height,this.Size.width),f=this.Search?String.format(this.Html.Search,this.ID):"",this.JElement.append(String.format(this.Html.DIV,this.ID,this.Type,u,f,this.Search)),t=SUtil.J(this.ID),this.ChkALL!==null&&t.append(this.ChkALL.Render()),n=0;n<this.Items.length;n++)t.append(this.Items[n].Render())};this.Set=function(n){this.Set_Base(n);n.Refresh===!0&&this.Render()};this.Set(n);this.Render();this.Click=function(){this.Set({Extend:!this.Extend,Refresh:!0})}}function SSELECT_DROP_CL(n){SSELECT_BASE_CL.call(this,n);this.DIALOG=null;this.Type=GSELECT.TYPE.DROP_DOWN;this.JElement.attr("data-t",this.Type);this.Direct=0;this.Html.Button=`<button type="button" onclick="GSELECT.Click(event,'{1}')" class="btn btn-default">
                            <table>
                                <tr>
                                    <td data-role="text" id="lb-{1}"><p>{0}<p></td>
                                    <td data-role="icon">{2}</td>
                                </tr>
                            </table>
                        </button>`;this.Html.Empty=`<button type="button"  class="btn btn-default">
                            <table>
                                <tr>
                                    <td data-role="text"><p style="opacity: 0.5; cursor: not-allowed">{0}<p></td>
                                </tr>
                            </table>
                        </button>`;this.Html.DIV=`<section data-t="{1}" style="{2}" onclick="GSELECT.StopClick(event)">
                        {3}
                        <div class="_lst" data-s="{4}">
                            <table>
                                <tbody id="{0}"></tbody>
                            </table>
                        </div>
                    </section>`;this.Render=function(){var i,r,f,u,t,n;if(this.JElement.empty(),this.Items.length>0){if(i=this.Extend?'<i class="fas fa-angle-up"><\/i>':'<i class="fas fa-angle-down"><\/i>',this.Direct>0&&this.Extend&&(i='<i class="fas fa-angle-down"><\/i>'),n=String.format(this.Html.Button,this.GetTextSelected(),this.ID,i),this.JElement.append(n),this.Extend===!1)return;for(r=String.format("height: {0}; width: {1}",this.Size.height,this.Size.width),r+=this.Direct>0?"; bottom: 100%":"; top: 100%",f=this.Search?String.format(this.Html.Search,this.ID):"",this.JElement.append(String.format(this.Html.DIV,this.ID,this.Type,r,f,this.Search)),u=SUtil.J(this.ID),this.ChkALL!==null&&u.append(this.ChkALL.Render()),t=0;t<this.Items.length;t++)u.append(this.Items[t].Render())}else n=String.format(this.Html.Empty,this.TextEmpty),this.JElement.append(n)};this.Set=function(n){this.Set_Base(n);n.Refresh===!0&&this.Render()};this.Set(n);this.Render();this.Click=function(n){var t=n.clientY,i=parseInt(this.Size.height)+32,r=SUtil.GetBrowserDim();if(this.Direct=t+i>r.h?1:0,this.Set({Extend:!this.Extend,Refresh:!0}),this.Extend){console.log(GSELECT.Data);for(let n=0;n<GSELECT.Data.length;n++)GSELECT.Data[n].Type===GSELECT.TYPE.DROP_DOWN&&GSELECT.Data[n].ID!==this.ID&&GSELECT.Data[n].Extend&&GSELECT.Data[n].Set({Extend:!1,Refresh:!0})}}}function SSELECT_POPUP_CL(n){SSELECT_BASE_CL.call(this,n);var t=this;this.DIALOG=null;this.SELECT=null;this.Type=GSELECT.TYPE.POPUP;this.JElement.attr("data-t",this.Type);this.Html.Button='<button type="button" onclick="GSELECT.Click(event,\'{1}\')" class="btn btn-default {2}">                             <span id="lb-{1}">{0}<\/span>                        <\/button>';this.Render=function(){this.JElement.empty();var n=String.format(this.Html.Button,this.GetTextSelected(),this.ID);this.JElement.append(n)};this.Set=function(n){this.Set_Base(n);n.Refresh===!0&&this.Render()};this.Set(n);this.Render();this.Click=function(){var n,i,r;this.DIALOG===null&&(n='<div id="dia{0}" title="{1}">                                <div id="dias-{0}"><div>                            <\/div>',$("body").append(String.format(n,this.ID,"SSELECT_POPUP_CL")),this.SELECT=new SSELECT_LIST_CL({Sender:"dias-"+this.ID,Items:this.Items,ChkALL:{Check:0,Text:"Tat ca",Func:function(){}},Search:!0,Height:"200px",Width:"100%"}),this.DIALOG=DIALOG.show({title:"Dialog",include:"dia"+this.ID,type:DIALOG.TYPE.DIALOG_S,id:this.ID,buttons:[new ButtonCL({html:"Apply",callback:function(){t.Set({Items:t.SELECT.Items,Refresh:!0})}}),new ButtonCL({html:"Close",callback:function(){}}),]}));i=SUtil.GetBrowserDim();r=Math.min(i.h,this.Size.height);this.SELECT.Set({Items:this.Items,Refresh:!0,Size:{width:"100%",height:r-120+"px"}});this.DIALOG.open()}}function SSELECT_LIST_CL(n){SSELECT_BASE_CL.call(this,n);this.DIALOG=null;this.Type=GSELECT.TYPE.LIST;this.JElement.attr("data-t",this.Type);this.Html.Button='<div>                             <span id="lb-{1}">{0}<span>                         <\/div>';this.Html.DIV='<section data-t="{1}" style="{2}" onclick="GSELECT.StopClick(event)">                         {3}                        <div class="_lst" data-s="{4}">                             <table>                                 <tbody id="{0}"><\/tbody>                             <\/table>                         <\/div>                     <\/section>';this.Render=function(){var i,r,u,t,n;for(this.JElement.empty(),i=String.format(this.Html.Button,this.GetTextSelected(),this.ID),this.JElement.append(i),r=String.format("height: {0}; width: {1}",this.Size.height,this.Size.width),u=this.Search?String.format(this.Html.Search,this.ID):"",this.JElement.append(String.format(this.Html.DIV,this.ID,this.Type,r,u,this.Search)),t=SUtil.J(this.ID),this.ChkALL!==null&&t.append(this.ChkALL.Render()),n=0;n<this.Items.length;n++)t.append(this.Items[n].Render())};this.Set=function(n){this.Set_Base(n);n.Refresh===!0&&this.Render()};this.Set(n);this.Render()}function SRADIO_LIST_CL(n){SSELECT_BASE_CL.call(this,n);this.Type=GSELECT.TYPE.LIST;this.Kind=GSELECT.KIND.RADIO;this.JElement.attr("data-t",this.Type);this.Html.Button='<div style="display:none">                             <span id="lb-{1}">{0}<span>                         <\/div>';this.Html.DIV='<section data-t="{1}" style="{2}" onclick="GSELECT.StopClick(event)">                         {3}                        <div class="_lst" data-s="{4}">                             <table>                                 <tbody id="{0}"><\/tbody>                             <\/table>                         <\/div>                     <\/section>';this.Render=function(){var t,i,r,u,n;for(this.JElement.empty(),t=String.format(this.Html.Button,this.GetTextSelected(),this.ID),this.JElement.append(t),i=String.format("height: {0}; width: {1}",this.Size.height,this.Size.width),r=this.Search?String.format(this.Html.Search,this.ID):"",this.JElement.append(String.format(this.Html.DIV,this.ID,this.Type,i,r,this.Search)),u=SUtil.J(this.ID),n=0;n<this.Items.length;n++)u.append(this.Items[n].Render())};this.Set=function(n){this.Set_Base(n);for(var t=0;t<this.Items.length;t++)this.Items[t].Kind=GSELECT.KIND.RADIO;n.Refresh===!0&&this.Render()};this.Set(n);this.Render()}function NoticeCL(n){this.message=SUtil.Default(n.msg,"Empty");this.duration=SUtil.Default(n.duration,0);this.type=SUtil.Default(n.type,ENoticeType.Info);this.position=SUtil.Default(n.position,ENoticePosition.BottomRight);this.iconFont=SUtil.Default(n.iconFont,"");this.ID=SUtil.AutoElementId();this.width=SUtil.Default(n.width,"320px");this.height=SUtil.Default(n.height,"");this.closeBtn=SUtil.Default(n.closeBtn,!1);this.class=SUtil.Default(n.class,"");NoticeHTML.push(this);this.CreateHTML=function(){var o=this.duration!==0?String.format('<div class="son-notice-duration"> <div class="son-notice-bar" id="notice-dur-{0}" data-p={0}><\/div> <\/div>',this.ID):"",u="",e,i,f;this.iconFont!==""?(e='<table role="iconfont" class="icon-font">                                    <tr>                                        <td>{0}<\/td>                                        <td>{1}<\/td>                                    <\/tr>                                <\/table>',u=String.format(e,this.iconFont,this.message)):u=this.message;i="";this.closeBtn&&(i='<div class="_divBtn"><button onclick="NoticeHTML.Close(\'{0}\')" type="button">{1}<\/button><\/div>',i=String.format(i,this.ID,LNG.GetValue("button","ok","OK")));var s=String.format('<div class="son-notice {0} {5}" id="{2}">                                <i onclick="NoticeHTML.Close(\'{2}\')" class="notice-close">&times;<\/i>                                <div class="son-notice-content">{1}<\/div>                                {3}                                {4}                            <\/div>',this.type,u,this.ID,o,i,this.class),r=document.getElementsByTagName("body")[0],n=null,t=document.createElement("div");t.setAttribute("class","notice-container");switch(this.position){case ENoticePosition.TopLeft:n=document.getElementById("notice-topleft");n===null&&(t.setAttribute("id","notice-topleft"),r.appendChild(t),n=document.getElementById("notice-topleft"));break;case ENoticePosition.TopRight:n=document.getElementById("notice-topright");n===null&&(t.setAttribute("id","notice-topright"),r.appendChild(t),n=document.getElementById("notice-topright"));break;case ENoticePosition.BottomLeft:n=document.getElementById("notice-bottomleft");n===null&&(t.setAttribute("id","notice-bottomleft"),r.appendChild(t),n=document.getElementById("notice-bottomleft"));break;case ENoticePosition.BottomRight:n=document.getElementById("notice-bottomright");n===null&&(t.setAttribute("id","notice-bottomright"),r.appendChild(t),n=document.getElementById("notice-bottomright"));break;case ENoticePosition.Center:t.setAttribute("class","notice-container notice-center");t.setAttribute("id","notice-center-"+this.ID);r.appendChild(t);n=document.getElementById("notice-center-"+this.ID);break;default:return}(n.innerHTML+=s,f=document.getElementById(this.ID),this.width!==""&&(f.style.width=this.width),this.height!==""&&(f.style.height=this.height),this.duration!==0)&&NoticeHTML.closeAfter((new Date).getTime(),this.duration,this)};this.CreateHTML();this.Remove=function(){var t=document.getElementById(this.ID),n=t.parentNode;n.removeChild(t);n.classList.contains("notice-center")&&n.parentNode.removeChild(n)}}function PagingCL(n){this.parentId=SUtil.Default(n.parentId,"");this.id=SUtil.Default(n.id,SUtil.AutoElementId());this.pageSize=50;this.pageIndex=1;this.totalRecord=0;this.totalPage=0;this.morePage=!1;this.onChange=null;this.set=function(n){n.pageSize!==undefined&&(this.pageSize=n.pageSize);n.onChange!==undefined&&(this.onChange=n.onChange);n.totalRecord!==undefined&&(this.totalRecord=n.totalRecord,this.totalPage=parseInt(this.totalRecord/this.pageSize),this.pageSize*this.totalPage<this.totalRecord&&this.totalPage++,this.pageIndex=Math.min(this.totalPage,this.pageIndex),this.pageIndex=Math.max(1,this.pageIndex));this.createHtml()};this.createHtml=function(){var t,n,i;if(this.totalRecord===0){document.getElementById(this.parentId).innerHTML="";return}t="";n=[5,10,25,50,100];for(let i=0;i<n.length;i++)t+=`<option value="${n[i]}"  ${this.pageSize==n[i]?"selected":""}>${n[i]}</option>`;i=`
            <div class="paging">
                <table>
                    <tr>
                        <td data-role="text" style="text-align: left; min-width:100px">Page <span>${this.pageIndex} of ${this.totalPage}</span>
                        </td>
                        <td data-role="btns">
                            <i class="fas fa-caret-square-left" data-enable="${this.pageIndex>1?1:0}" onclick="PAGING.next('${this.id}', -1)"></i>
                            <i class="fas fa-caret-square-right"  data-enable="${this.pageIndex<this.totalPage?1:0}"  onclick="PAGING.next('${this.id}', 1)"></i>
                        </td>
                        <td>&nbsp</td>
                        <td style="text-align: right">Go To Page</td>
                        <td data-role="input">
                            <input type="number" min="1" max="${this.totalPage}" class="form-control form-control-sm son-textbox" id="${this.id}_txtGoto" onkeypress="return InputValidate.IsInteger(event);"/>
                        </td>
                        <td data-role="btns" style="width: 55px">
                            <i class="fas fa-caret-square-right" onclick="PAGING.gotoPage('${this.id}')"></i>
                        </td>

                        <td style="text-align: right">Records Per Page</td>
                        <td data-role="input">
                            <select style="margin: 0px 0px 0px auto" class="form-control form-control-sm son-textbox" onchange="PAGING.changePageSize(this, '${this.id}')">
                               ${t}
                            </select>
                        </td>

                    </tr>
                </table>
            </div>
        `;document.getElementById(this.parentId).innerHTML=i};this.goto=function(n){if((n=SUtil.HandleMaxMin(n,1,this.totalPage),this.pageIndex!==n)&&!(n<1)){if(this.pageIndex=n,console.log("goto: "+this.pageIndex),this.onChange!==null)this.onChange(this.pageIndex);this.createHtml()}};this.set(n);PAGING.data.push(this);this.next=function(n){var t=this.pageIndex+n;this.goto(t)};this.changePageSize=function(n){if(this.pageIndex=1,this.pageSize=n,this.totalPage=parseInt(this.totalRecord/this.pageSize),this.pageSize*this.totalPage<this.totalRecord&&this.totalPage++,console.log("changePageSize: "+this.pageIndex),this.onChange!==null)this.onChange(this.pageIndex);this.createHtml()};this.oldPageIndex=0;this.gotoPage=function(){var n=document.getElementById(this.id+"_txtGoto").value;n.trim()!==""&&(this.oldPageIndex=this.pageIndex,this.goto(parseInt(n)))};this.back=function(){this.pageIndex=this.oldPageIndex;this.createHtml()}}function SliderNumberS1(n){this.Slide=null;this.Unit=n.unit||1;this.Value=n.defaultValue||0;this.Min=n.min||0;this.Max=n.max||0;this.ID=SUtil.GetRadomKeyPlus("rslider");this.ElementID=n.element||"body";this.JElement=SUtil.J(this.ElementID);this.JElement.addClass("SliderNumberS1");this.JLable=null;var t=this;this.OnSlide=null;this.OnStop=null;this.OnPlus=null;this.Slide=this.JElement.slider({animate:!0,range:"min",value:this.Value,min:this.Min,max:this.Max,create:function(){var i=t.JElement.find("span").first(),r=String.format('<i class="fa fa-angle-left btn-slider" aria-hidden="true"><\/i> <span id="lableSlider{0}">{1}<\/span> <i class="fa fa-angle-right btn-slider" aria-hidden="true"><\/i>',t.ID,t.Value),n;i.html(r);t.JLable=$("#lableSlider"+t.ID);n=i.find("i");$(n[0]).click(function(){t.PlusValue(-1*t.Unit)});$(n[1]).click(function(){t.PlusValue(t.Unit)})},slide:function(n,i){t.RangeValue(i.value);t.OnSlide!==null&&t.OnSlide(t.Value)},stop:function(n,i){t.RangeValue(i.value);t.OnStop!==null&&t.OnStop(t.Value)}});this.RangeValue=function(n){n=parseInt(n);n=n>this.Max?this.Max:n;n=n<this.Min?this.Min:n;this.Value=n;this.JLable!==null&&this.JLable.text(this.Value)};this.Set=function(n){n.value!==undefined&&(this.RangeValue(value),this.Slide.slider("value",this.Value))};this.PlusValue=function(n){var t=this.Value+n;this.RangeValue(t);this.Slide.slider("value",this.Value);this.OnPlus!==null&&this.OnPlus(this.Value)}}function SliderNumberS2(n){var t;this.Unit=n.unit||1;this.Value=n.defaultValue||0;this.Min=n.min||0;this.Max=n.max||0;this.ID=SUtil.GetRadomKeyPlus("rslider");this.ElementID=n.element||"body";this.JElement=SUtil.J(this.ElementID);this.JLable=null;this.NameUnit=n.nameOfUnit||"";this.LabelClass=n.labelclass||"";this.NameOfSlide=n.name||"";t=this;this.OnSlide=null;this.OnStop=null;this.OnPlus=null;this.OnChangeValue=null;this.JElement.addClass("SliderNumberS2");var i=this.NameOfSlide.length>0?'<td data-role="name"> '+this.NameOfSlide+"  <\/td>":"",r=String.format('<table>                        <tr>                            {4}                            <td data-role="btnF"><i data-role="btnDe" class="fa fa-minus" aria-hidden="true"><\/i><\/td>                            <td data-role="slide"><div id="{0}"><\/div><\/td>                            <td data-role="btnE"><i data-role="btnIn" class="fa fa-plus" aria-hidden="true"><\/i><\/td>                            <td data-role="label" class="{2}"> <span data-role="label">{3}<\/span> {1} <\/td>                        <\/tr>                    <\/table>',this.ID,this.NameUnit,this.LabelClass,this.Value,i);this.JElement.html(r);this.JSender=SUtil.J(this.ID);this.JLable=this.JElement.find("span[data-role='label']").first();this.JElement.find("td[data-role='btnF']").first().click(function(){t.PlusValue(-1*t.Unit)});this.JElement.find("td[data-role='btnE']").first().click(function(){t.PlusValue(t.Unit)});this.Slide=this.JSender.slider({animate:!0,range:"min",value:this.Value,min:this.Min,max:this.Max,create:function(){},slide:function(n,i){t.RangeValue(i.value);t.OnSlide!==null&&t.OnSlide(t.Value);t.OnChangeValue!==null&&t.OnChangeValue(t.Value)},stop:function(n,i){t.RangeValue(i.value);t.OnStop!==null&&t.OnStop(t.Value)}});this.RangeValue=function(n){n=parseInt(n);n=n>this.Max?this.Max:n;n=n<this.Min?this.Min:n;this.Value=n;this.JLable!==null&&this.JLable.text(this.Value)};this.PlusValue=function(n){var t=this.Value+n;this.RangeValue(t);this.Slide.slider("value",this.Value);this.OnPlus!==null&&this.OnPlus(this.Value);this.OnChangeValue!==null&&this.OnChangeValue(this.Value)};this.Set=function(n){n.value!==undefined&&(this.RangeValue(n.value),this.Slide.slider("value",this.Value),this.OnChangeValue!==null&&this.OnChangeValue(this.Value))};this.Get=function(){return{value:this.Value}}}function SliderNumberV(n){var t;this.Unit=n.unit||1;this.Value=n.defaultValue||0;this.Min=n.min||0;this.Max=n.max||0;this.ID=SUtil.GetRadomKeyPlus("rslider");this.ElementID=n.element||"body";this.JElement=SUtil.J(this.ElementID);this.JLable=null;this.NameUnit=n.nameOfUnit||"";this.LabelClass=n.labelclass||"";this.NameOfSlide=n.name||"";this.HeightOfSlider=n.height||100;t=this;this.OnSlide=null;this.OnStop=null;this.OnPlus=null;this.OnChangeValue=null;this.JElement.addClass("SliderNumberV");var i=this.NameOfSlide.length>0?'<td data-role="name"> '+this.NameOfSlide+"  <\/td>":"",r=String.format('<table>                        <tr>{4}<\/tr>                        <tr><td data-role="btnE"><i data-role="btnIn" class="fa fa-chevron-up" aria-hidden="true"><\/i><\/td><\/tr>                        <tr><td data-role="slide"><div id="{0}" style="height:{5}px"><\/div><\/td><tr>                        <tr><td data-role="btnF"><i data-role="btnDe" class="fa fa-chevron-down" aria-hidden="true"><\/i><\/td><\/tr>                        <tr><td data-role="label" class="{2}"> <span data-role="label">{3}<\/span> {1} <\/td><\/tr>                    <\/table>',this.ID,this.NameUnit,this.LabelClass,this.Value,i,this.HeightOfSlider);this.JElement.html(r);this.JSender=SUtil.J(this.ID);this.JLable=this.JElement.find("span[data-role='label']").first();this.JElement.find("td[data-role='btnF']").first().click(function(){t.PlusValue(-1*t.Unit)});this.JElement.find("td[data-role='btnE']").first().click(function(){t.PlusValue(t.Unit)});this.Slide=this.JSender.slider({animate:!0,range:"min",value:this.Value,min:this.Min,max:this.Max,orientation:"vertical",create:function(){},slide:function(n,i){t.RangeValue(i.value);t.OnSlide!==null&&t.OnSlide(t.Value);t.OnChangeValue!==null&&t.OnChangeValue(t.Value)},stop:function(n,i){t.RangeValue(i.value);t.OnStop!==null&&t.OnStop(t.Value)}});this.RangeValue=function(n){n=parseInt(n);n=n>this.Max?this.Max:n;n=n<this.Min?this.Min:n;this.Value=n;this.JLable!==null&&this.JLable.text(this.Value)};this.PlusValue=function(n){var t=this.Value+n;this.RangeValue(t);this.Slide.slider("value",this.Value);this.OnPlus!==null&&this.OnPlus(this.Value);this.OnChangeValue!==null&&this.OnChangeValue(this.Value)};this.Set=function(n){n.value!==undefined&&(this.RangeValue(n.value),this.Slide.slider("value",this.Value),this.OnChangeValue!==null&&this.OnChangeValue(this.Value))};this.Get=function(){return{value:this.Value}}}function TimerCountDownClass(n,t,i){this.timer=t;this.minutes=0;this.seconds=0;var r=this;this.Update=function(){this.minutes=parseInt(this.timer/60,10);this.seconds=parseInt(this.timer%60,10);this.minutes=this.minutes<10?"0"+this.minutes:this.minutes;this.seconds=this.seconds<10?"0"+this.seconds:this.seconds;$(n).html(this.minutes+":"+this.seconds);this.timer=this.timer-1;this.timer<=0&&(i!==undefined&&i!==null&&i(),this.Stop())};this.Interval=null;this.Run=function(){this.Stop();this.Interval=setInterval(function(){r.Update()},1e3)};this.Stop=function(){this.Interval!==null&&clearInterval(this.Interval)}}function SUpFILECL(n){var t,i;SUpFILE.Data.push(this);t=this;this.ElementId=n.sender;this.Sender=SUtil.J(this.ElementId);this.Id=SUtil.GetRadomKeyPlus("imgup");this.File=null;this.accept=SUtil.Default(n.accept,"");i='<div class="file-upload" id="{0}" onclick="SUpFILE.Click(this)">                        <img id="{0}img" src="{1}" />                        <h5 id="{0}title">'+LNG.GetValue("uploadfile","browseFile","Browse or drop file to here")+'<\/h5>                    <\/div>                    <input id="{0}btn" ms="{0}" type="file" class="hidden" onchange="SUpFILE.Browse(event)" accept="{2}" />';this.Sender.html(String.format(i,this.Id,this.Source,this.accept));this.ChangImg=!1;this.OnChange=null;this.Click=function(){SUtil.J(this.Id+"btn").click()};this.Extensions=".zip";this.CheckFile=function(n){if(n.size>this.MAX_FILE_SIZE)return MESSAGE.ok({html:String.format(LNG.GetValue("uploadfile","notsupportfilethan","Not support file more than {0}MB."),10)}),!1;if(this.Extensions.length>0){var t=n.name.split(".")[n.name.split(".").length-1],i=this.Extensions.indexOf(t.toLowerCase());if(i<0)return MESSAGE.ok({html:String.format(LNG.GetValue("uploadfile","fileIncorrectFormat","Wrong format, please select file {0} "),this.Extensions)}),!1}return!0};this.Browse=function(n){if(n.target.files.length!==0){var i=n.target.files[0];this.CheckFile(i)!==!1&&(this.Set({File:i}),t.OnChange!==null&&t.OnChange(i))}};this.Set=function(n){n.File!==undefined&&(this.File=n.File,SUtil.J(this.Id+"title").html(this.File.name));n.Title!==undefined&&SUtil.J(this.Id+"title").html(n.Title);n.Extensions!==undefined&&(this.Extensions=n.Extensions)};this.Set(n)}function BrowserImageCL(n){SUpMulIMG.Data.push(this);var t=this;this.ElementId=n.sender;this.Sender=SUtil.J(this.ElementId);this.Id=SUtil.GetRadomKeyPlus("imgup");this.Source=[];this.MAX=10;this.MAX_NUMBER=5;this.bReplaceOldest=!1;this.Render=function(){for(var i,r,n="",t=0;t<this.Source.length;t++)i=this.Source[t],n+=String.format('<div>                            <div>                                <img id="{0}" style="display:inline" src="{1}" />                                <i data-id="{2}" data-imgid="{0}" onclick="SUpMulIMG.Delete(this)" class="fa fa-times" aria-hidden="true"><\/i>                            <\/div>                        <\/div>',i.Id,i.Base64,this.Id);SUtil.J(this.Id+"btn").length===0?(r='<div class="img-upload" id="{0}" onclick="SUpMulIMG.Click(this)" ondrop="SUpMulIMG.Drop(event);" ondragover="SUpMulIMG.DragOver(event);">                                <div class="_dvImg" id="{0}img">{3}<\/div>                                <div class="_dvMsg"><h5 id="{0}title">{2}<\/h5><\/div>                            <\/div>                            <input id="{0}btn" ms="{0}" type="file" class="hidden" accept="image/*" onchange="SUpMulIMG.Browse(event)" multiple/>',this.Sender.html(String.format(r,this.Id,this.Source,LNG.GetValue("uploadfile","browseImage","Browse or drop image to here"),n))):SUtil.J(this.Id+"img").html(n)};this.Render();this.OnChange=null;this.Click=function(){SUtil.J(this.Id+"btn").click()};this.format="jpg";this.MAX_FILE_SIZE=10485760;this.Extensions=".bmp, .jpeg, .jpg, .png";this.CheckFile=function(n,t){if(n.size>this.MAX_FILE_SIZE)return t?MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","notsupportfilethan","Not support file more than {0}MB."),10)}):MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","fileOutSize","File {0} more than {1}MB"),n.name,10)}),!1;if(this.Extensions.length>0){var i=n.name.split(".")[n.name.split(".").length-1],r=this.Extensions.indexOf(i.toLowerCase());if(r<0)return t?MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","fileIncorrectFormat","Wrong format, please select file {0} "),this.Extensions)}):MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","fileWrongFormat","File {0} is wrong format"),n.name)}),!1}return!0};this.sizeOfImage={width:1920,height:1920};this.AddFile=function(n,i,r){var u,f,e;if(!(r>=n.length)){if(this.Source.length>=this.MAX_NUMBER){if(this.bReplaceOldest===!1){MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","maxNumber","Maximun is {0} image(s)"),this.MAX_NUMBER)});return}this.Source.shift()}for(u=n[r],f=0;f<this.Source.length;f++)if(u.name===this.Source[f].Name){i?MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","fileExisted","{0} is existed"),u.name)}):MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","fileExisted","{0} is existed"),u.name)});return}this.CheckFile(u,i)!==!1&&(e=new Image,e.onload=function(){var f=ImageUtilities.LimitSizeOfImage(e,t.sizeOfImage,t.format).base64;t.ChangImg=!0;t.Set({Add:{Id:SUtil.GetRadomKeyPlus("img"),Base64:f,Name:u.name}});t.OnChange!==null&&t.OnChange(f);r++;t.AddFile(n,i,r)},e.src=URL.createObjectURL(u))}};this.Browse=function(n){n.target.files.length!==0&&(this.AddFile(n.target.files,!0,0),n.target.value=null)};this.loadURL=function(n){this.Source=[];for(var i=0;i<n.length;i++)t.ChangImg=!1,t.Set({Add:{Id:SUtil.GetRadomKeyPlus("img"),Base64:n[i],Name:n[i]}});n.length===0&&t.Set({Change:!1})};this.Set=function(n){if(n.Add!==undefined&&(this.Source.length>=this.MAX_NUMBER?MESSAGE.show({text:String.format(LNG.GetValue("uploadfile","maxNumber","Maximun is {0} image(s)"),this.MAX_NUMBER)}):(this.Source.push(n.Add),this.Render(),SUtil.J(this.Id+"img").animate({scrollLeft:this.Source.length*150},1e3))),n.Delete!==undefined){for(var t=0;t<this.Source.length;t++)if(this.Source[t].Id===n.Delete){this.Source.splice(t,1);break}this.ChangImg=!0;this.Render()}n.Change!==undefined&&(this.ChangImg=n.Change);n.bReplaceOldest!==undefined&&(this.bReplaceOldest=n.bReplaceOldest);n.format!==undefined&&(this.format=n.format);n.sizeOfImage!==undefined&&(this.sizeOfImage=n.sizeOfImage);n.MAX!==undefined&&(this.MAX=n.MAX);n.MAX_NUMBER!==undefined&&(this.MAX_NUMBER=n.MAX_NUMBER);this.Source.length>0?(SUtil.J(this.Id+"title").parent().hide(),SUtil.J(this.Id+"img").show()):(SUtil.J(this.Id+"img").hide(),SUtil.J(this.Id+"title").parent().show())};this.Set(n)}function SUpMFILECL(n){SUpMFILECL.data.push(this);var t=this;this.sender=n.sender;this.id=SUtil.GetRadomKeyPlus("imgup");this.title=LNG.GetValue("uploadfile","browseFile","Browse or drop files to here");this.extensions=".zip";this.htmlFile='<div class="_file" id="{3}_file" data-locked="{6}" data-color="{7}">                        <div id="{3}_probar" style="width: {5}%" class="_process"><\/div>                        <table>                            <tr>                                <td class="_stt">{0}<\/td>                                <td class="_name">{1} <\/td>                                <td class="_size">{2} MB<\/td>                                <td class="_btn" onclick="SUpMFILECL.delete(\'{1}\', \'{3}\', event)"><i class="fa fa-trash" aria-hidden="true"><\/i><\/td>                            <\/tr>                        <\/table >                        <div class="_progress">                            <span id="{3}_msg">{4}<\/span>                        <\/div>                    <\/div>';this.files=[];this.body=null;this.fileSize=10;this.MAX_FILE_SIZE=10485760;this.maxNumber=10;this.urlReqCheck="";this.mesg=null;this.render=function(){var n,t;if(this.body!==null)if(this.files.length===0)this.body.innerHTML=String.format("<h5>{0}<\/h5>",this.title);else{n="";for(let i=0;i<this.files.length;i++)t=this.files[i].file,n+=String.format(this.htmlFile,i+1,t.name,(t.size/1048576).toFixed(2),this.id,this.files[i].note,this.files[i].upload,this.locked,this.files[i].color);this.body.innerHTML=n}};this.createHtml=function(){document.getElementById(this.sender).innerHTML=String.format('<div class="file-uploads" id="{0}" onclick="SUpMFILECL.click(this)" ondrop="SUpMFILECL.drop(event)" ondragover="SUpMFILECL.dragOver(event)"><\/div>                        <input id="{0}btn" ms="{0}" type="file" class="hidden" onchange="SUpMFILECL.browse(event)" accept="{1}"/>',this.id,this.extensions);this.body=document.getElementById(this.id);this.render()};this.set=function(n){n.title!==undefined&&(this.title=n.title);n.extensions!==undefined&&(this.extensions=n.extensions);n.fileSize!==undefined&&(this.fileSize=n.fileSize,this.MAX_FILE_SIZE=this.fileSize*1048576);n.maxNumber!==undefined&&(this.maxNumber=n.maxNumber);n.urlReqCheck!==undefined&&(this.urlReqCheck=n.urlReqCheck);this.mesg===null&&(this.mesg={noFile:LNG.GetValue("uploadfile","no-file","There are not file to upload")});this.render()};this.addFile=function(n){var t,i;if(this.checkFile(n)!==!1){if(t=String.format(LNG.GetValue("uploadfile","upload-percent","Upload: {0} %"),0),this.maxNumber===1)this.files=[{file:n,uploaded:0,note:t,color:SUpMFILECL.COLOR.DEFAULT}];else{if(this.files.length>=this.maxNumber){NoticeHTML.Info({msg:LNG.GetValue("uploadfile","note-maxNumber","Sorry! Exceeded the allowed amount")});return}if(i=this.files.find(t=>t.file.name===n.name),i!=null){NoticeHTML.Info({msg:String.format(LNG.GetValue("uploadfile","Already-exists","Already exists {0}"),n.name)});return}this.files.push({file:n,uploaded:0,note:t,color:SUpMFILECL.COLOR.DEFAULT})}this.render()}};this.set(n);this.createHtml();this.delete=function(n){if(!this.locked){for(let t=0;t<this.files.length;t++)if(this.files[t].file.name===n){this.files.splice(t,1);break}this.render()}};this.click=function(){this.locked||SUtil.J(this.id+"btn").click()};this.checkFile=function(n){if(n.size>this.MAX_FILE_SIZE)return NoticeHTML.Warning({msg:String.format(LNG.GetValue("uploadfile","notsupportfilethan","Not support file more than {0}MB."),this.fileSize)}),!1;if(this.extensions.length>0){var i=n.name.split(".")[n.name.split(".").length-1],r=this.extensions.indexOf(i.toLowerCase());if(r<0)return NoticeHTML.Warning({msg:String.format(LNG.GetValue("uploadfile","fileIncorrectFormat","Wrong format, please select file {0} "),this.extensions)}),!1}return this.urlReqCheck.length>0&&setTimeout(function(){t.checkFileNameExisted(n,function(i){var r=t.files.find(t=>t.file.name===n.name);if(r!==null&&r!==undefined)switch(i){case"EXIST":r.note=String.format(LNG.GetValue("uploadfile","fileExisted","{0} is existed"),n.name);r.color=SUpMFILECL.COLOR.DONE;r.upload=100;t.render();break;case"ERROR":r.upload=100;r.color=SUpMFILECL.COLOR.ERROR;r.note=LNG.GetValue("uploadfile","can-not-check","Can not check this file");t.render();break;case"OK":r.color=SUpMFILECL.COLOR.DEFAULT}})},1e3),!0};this.browse=function(n){if(!this.locked&&n.target.files.length!==0){var t=n.target.files[0];this.addFile(t)}};this.urlReq="";this.onDoneUpload=null;this.onDoneFile=null;this.onErrorFile=null;this.ajaxUpload=null;this.locked=!1;this.upload=function(n){return this.files.length===0?(MESSAGE.ok({html:this.mesg.noFile}),!1):this.locked?!1:(this.urlReq=n,this.uploadFile(0),!0)};this.fileFocus=null;this.nextUploadFile=function(n){n++;this.uploadFile(n)};this.uploadFile=function(n){if(this.files.length<=n){this.locked=!1;this.onDoneUpload!==null&&setTimeout(function(){t.onDoneUpload()},200);this.render();return}if(this.locked=!0,this.fileFocus=this.files[n],this.fileFocus.upload>=100){this.nextUploadFile(n);return}this.render();var i=new FormData;i.append("file"+n.toString(),this.files[n].file);this.ajaxUpload=new XMLHttpRequest;this.ajaxUpload.upload.addEventListener("progress",function(n){var i=n.loaded/n.total*100;t.fileFocus.upload=i;t.fileFocus.note=String.format(LNG.GetValue("uploadfile","upload-percent","Upload: {0} %"),i.toFixed(1));t.render()},!1);this.ajaxUpload.addEventListener("load",function(i){if(t.fileFocus.upload=100,t.fileFocus.note=LNG.GetValue("uploadfile","upload-complete","Upload complete"),t.fileFocus.color=SUpMFILECL.COLOR.DONE,t.onDoneFile!==null)t.onDoneFile(t.fileFocus,i.target.response);t.nextUploadFile(n)},!1);this.ajaxUpload.addEventListener("error",function(){let i=t.files[n];if(i.note=LNG.GetValue("uploadfile","can-not-upload","Can not upload"),t.onErrorFile!==null)t.onErrorFile(t.fileFocus.file);t.nextUploadFile(n)},!1);this.ajaxUpload.addEventListener("abort",function(){console.log("Abort Upload")},!1);this.ajaxUpload.open("POST",this.urlReq);this.ajaxUpload.send(i)};this.checkFileNameExisted=function(n,t){var i=this.urlReqCheck+"&name="+n.name;$.get(i,function(n){t(n)}).fail(function(){t("ERROR")})};this.abort=function(){if(this.ajaxUpload===null)return!0;try{return this.ajaxUpload.abort(),this.locked=!1,this.render(),!0}catch(n){return!1}}}function MSelectItemCL(n){this.id="mselectitem_"+MSelectCL.count++;this.id_mselect=n.id_mselect;this.html="";this.callback=null;this.check=0;this.enable=!0;this.visible=!0;this.data=null;this.type="";this.badge=-1;this.refresh=function(){};this.set=function(n){n.html!==undefined&&(this.html=n.html);n.data!==undefined&&(this.data=n.data);n.callback!==undefined&&(this.callback=n.callback);n.check!==undefined&&(this.check=n.check);n.enable!==undefined&&(this.enable=n.enable);n.visible!==undefined&&(this.visible=n.visible);n.badge!==undefined&&(this.badge=n.badge);n.refresh===!0&&this.refresh()};this.set(n);this.ICON={Check:`<i class="cobalt-chk" data-check="1"></i>`,UnCheck:`<i class="cobalt-chk" data-check="0"></i>`,UnCheckALL:`<i class="cobalt-chk" data-check="2"></i>`};this.createHtml=function(){var n,t;if(this.visible===!1)return``;n="";switch(this.check){case 0:n=this.ICON.UnCheck;break;case 1:n=this.ICON.Check;break;default:n=this.ICON.UnCheckALL}return t=``,this.badge>=0&&(t=`(${this.badge})`),`<li id="${this.id}" data-check="${this.check}" onclick="MSelectCL.click(event,'${this.id_mselect}','${this.id}')">
                   ${n}${this.html} ${t}
                </li>`};this.refresh=function(){$("#"+this.id).replaceWith(this.createHtml())};this.click=function(n){this.check=n===undefined?this.check===1||this.check===2?0:1:n;this.refresh();this.callback!==null&&this.callback(this)}}function MSelectCL(n){this.parentId=n.parentId;this.id="mselect_"+MSelectCL.count++;MSelectCL.register(this);this.useChkAll=!0;this.useSearch=!1;this.items=[];this.chkAll=null;this.placeholder="Please Select...";this.texts={noData:"No Data Available",placeholder:"Please Select..."};this.type=0;this.size={width:"100%",height:"300px"};this.width="100%";this.bToggle=!1;this.enable=!0;this.onChange=null;this.memory_select_lst=[];this.calcOnChangeEvent=function(n){if(this.onChange!==null){let r=this.items.filter(n=>n.check===1),t=r.map(n=>n.id),i=this.memory_select_lst;if(t.length!==i.length){this.onChange(n);return}let u=t.every(function(n,t){return n===i[t]});if(u===!1)this.onChange(n)}};this.onToggle=null;this.setItems=function(n){let i=this.items.filter(n=>n.check===1).map(n=>n.html),t=0;if(t=this.items.length===0?1:i.length===this.items.length?1:i.length>0?2:0,this.items=[],t==0||t==1)for(let i=0;i<n.length;i++)n[i].id_mselect=this.id,n[i].check=t,this.items.push(new MSelectItemCL(n[i]));else for(let t=0;t<n.length;t++){n[t].id_mselect=this.id;var r=i.find(i=>i.html===n[t].html);n[t].check=r?1:0;this.items.push(new MSelectItemCL(n[t]))}n.length>10&&(this.useSearch=!0);this.refresh()};this.set=function(n){if(n.placeholder!==undefined&&(this.placeholder=n.placeholder),n.size!==undefined&&(this.size=n.size),n.width!==undefined&&(this.width=n.width),n.items!==undefined){this.items=[];for(let t=0;t<n.items.length;t++)n.items[t].id_mselect=this.id,this.items.push(new MSelectItemCL(n.items[t]));n.items.length>10&&(this.useSearch=!0)}if(n.useSearch!==undefined&&(this.useSearch=n.useSearch),n.chkAll!==undefined&&(this.chkAll=new MSelectItemCL(n.chkAll)),n.useChkAll!==undefined&&(this.useChkAll=n.useChkAll),n.enable!==undefined&&(this.enable=n.enable,document.getElementById(this.id)!==null&&document.getElementById(this.id).setAttribute("data-enable",this.enable)),n.texts!==undefined){let t=n.texts;t.noData!==undefined&&(this.texts.noData=t.noData);t.placeholder!==undefined&&(this.texts.placeholder=t.placeholder)}n.refresh===!0&&this.createHtml();n.onChange!==undefined&&(this.onChange=n.onChange);n.onToggle!==undefined&&(this.onToggle=n.onToggle)};this.clickAll=function(n){var t,i;n===undefined&&(n=this.chkAll.check>0?0:1);this.chkAll.check=n;this.chkAll.refresh();t=this.items.filter(n=>n.visible===!0);t.forEach(function(t){t.set({check:n})});i="";t.forEach(function(n){i+=n.createHtml()});document.getElementById(`${this.id}_items`).innerHTML=i;this.showMessageSelected()};this.updateChkAll=function(){if(this.useChkAll!==!1){var n=this.items.filter(n=>n.visible===!0),t=n.filter(n=>n.check===1);t.length===0?this.chkAll.set({check:0,refresh:!0}):t.length===n.length?this.chkAll.set({check:1,refresh:!0}):this.chkAll.set({check:2,refresh:!0})}};this.click=function(n){if(this.useChkAll&&n==this.chkAll.id){this.clickAll();return}var t=this.items.find(t=>t.id===n);t.click();this.showMessageSelected();this.updateChkAll()};this.toggle=function(n,t){if(this.enable!=!1&&document.getElementById(this.id).getAttribute("data-toggle")!==t){if(t===undefined&&(t=document.getElementById(this.id).getAttribute("data-toggle")==="true"?"false":"true"),t==="true"){for(let n=0;n<MSelectCL.data.length;n++)MSelectCL.data[n].id!==this.id&&MSelectCL.data[n].toggle(null,"false");for(let n=0;n<MRadioCL.data.length;n++)MRadioCL.data[n].toggle(null,"false");if(this.useSearch&&(document.getElementById(`${this.id}_txtfilter`).value="",this.filter()),n!==null&&n!==undefined){var i=parseInt(this.size.height);let t=n.clientY+i>window.innerHeight?1:0;document.getElementById(`${this.id}_toggle`).setAttribute("data-direct",t)}let t=this.items.filter(n=>n.check===1);if(this.memory_select_lst=t.map(n=>n.id),this.onToggle!==null)this.onToggle("open")}else{if(this.onToggle!==null)this.onToggle("close");this.calcOnChangeEvent("toggle-close")}document.getElementById(this.id).setAttribute("data-toggle",t)}};this.filter=function(){var n=document.getElementById(`${this.id}_txtfilter`).value,t=0,i;n.trim()===""?(this.items.forEach(function(n){n.set({visible:!0})}),t=this.items.length):(n=n.toLowerCase(),this.items.forEach(function(i){var r=i.html.toLowerCase().indexOf(n)>=0?!0:!1;r&&t++;i.set({visible:r})}));this.chkAll.set({badge:t});i="";this.items.forEach(function(n){i+=n.createHtml()});this.updateChkAll();document.getElementById(`${this.id}_items`).innerHTML=i};this.showMessageSelected=function(){function r(n,t=14,i="arial"){let r=document.createElement("span");r.style.font=i;r.style.fontSize=t+"px";r.style.height="auto";r.style.width="auto";r.style.position="absolute";r.style.whiteSpace="no-wrap";r.innerHTML=n;document.body.appendChild(r);let u=r.clientWidth;return document.body.removeChild(r),u}var n="",t=this.items.filter(n=>n.check===1),i;if(t.length===0)n=this.placeholder;else if(t.length===this.items.length)n="All";else if(t.length===1){n=t[0].html;let i=r(n),u=document.getElementById(`${this.id}_result`).clientWidth*.8;i>u&&(n=`1 Selected`)}else if(t.length<10){i="";t.forEach(function(n){i+=n.html+","});i=i.substring(0,i.length-1);let u=r(i),f=document.getElementById(`${this.id}_result`).clientWidth*.8;n=u<=f?i:`${t.length} Selected`}else n=`${t.length} Selected`;document.getElementById(`${this.id}_result`).innerHTML=n};this.createHtml=function(){var t,i,r,u,n;if(document.getElementById(this.parentId).innerHTML="",this.items.length===0){document.getElementById(this.parentId).innerHTML=`
                   <div class="mselectcl" id="${this.id}" style="width: ${this.width}">
                        <div class="_button" data-empty="true">
                            <p>${this.texts.noData}</p>
                        </div>
                    </div>
                `;return}t="";this.items.forEach(function(n){t+=n.createHtml()});i=``;this.useSearch&&(i=`
                <div class="_search">
                    <input id="${this.id}_txtfilter" onkeyup="MSelectCL.filter('${this.id}')" class="form-control form-control-sm son-textbox" placeholder="Search for..." />
                </div>
            `);r=``;this.useChkAll&&(this.chkAll==null&&(this.chkAll=new MSelectItemCL({html:"All",id_mselect:this.id,badge:this.items.length})),r=`
                            <div class="_chkAll">
                                <ul class="_chkul">
                                    ${this.chkAll.createHtml()}
                                </ul>
                            </div>
                           `);u=`
                    <div class="mselectcl" id="${this.id}" onclick="MSelectCL.stopClick(event)" data-toggle="false" data-enable="${this.enable}" style="width: ${this.width}">
                        <div class="_button" onclick="MSelectCL.toggle(event,'${this.id}')">
                            <p id="${this.id}_result">&nbsp;</p>
                            <button type="button">
                                <i class="fas fa-caret-down" style="font-size: 18px"></i>
                            </button>
                        </div>
                        <div class="_toggle" data-direct="0" id="${this.id}_toggle" style="width: ${this.size.width}; height: ${this.size.height}">
                            ${i}
                            ${r}
                            <div class="_items">
                                <ul class="_chkul" id="${this.id}_items">${t}</ul>
                            </div>
                        </div>
                    </div>
                    `;document.getElementById(this.parentId).innerHTML=u;n=parseInt(this.size.height)-10;this.useChkAll&&(n=n-41);this.useSearch&&(n=n-44);document.getElementById(`${this.id}_items`).parentNode.style.height=n+"px";this.showMessageSelected();this.updateChkAll()};this.set(n);this.createHtml();this.clickOustside=function(n){var i=document.getElementById(`${this.id}`),t=n.target;do{if(t==i)return;t=t.parentNode}while(t);this.toggle(n,"false")};this.getValue=function(n=true){var t=this.items.filter(n=>n.check===1);return n&&t.length==this.items.length?[]:t.map(n=>n.data)};this.refresh=function(){try{this.createHtml();this.chkAll.set({badge:this.items.length,refresh:!0})}catch(n){}}}function MRadioItemCL(n){this.id="MRadioitem_"+MRadioCL.count++;this.id_MRadio=n.id_MRadio;this.html="";this.callback=null;this.check=0;this.enable=!0;this.visible=!0;this.data=null;this.type="";this.badge=-1;this.refresh=function(){};this.set=function(n){n.html!==undefined&&(this.html=n.html);n.data!==undefined&&(this.data=n.data);n.callback!==undefined&&(this.callback=n.callback);n.check!==undefined&&(this.check=n.check);n.enable!==undefined&&(this.enable=n.enable);n.visible!==undefined&&(this.visible=n.visible);n.badge!==undefined&&(this.badge=n.badge);n.refresh===!0&&this.refresh()};this.set(n);this.ICON={Check:'<i class="fas fa-check-circle"><\/i>',UnCheck:'<i class="far fa-circle"><\/i>'};this.createHtml=function(){var n,t;if(this.visible===!1)return``;n="";switch(this.check){case 0:n=this.ICON.UnCheck;break;case 1:n=this.ICON.Check}return t=``,this.badge>=0&&(t=`(${this.badge})`),`<li id="${this.id}" data-check="${this.check}" onclick="MRadioCL.click(event,'${this.id_MRadio}','${this.id}')">
                   ${n}${this.html} ${t}
                </li>`};this.refresh=function(){$("#"+this.id).replaceWith(this.createHtml())};this.click=function(n){this.check=n===undefined?this.check===1||this.check===2?0:1:n;this.refresh();this.callback!==null&&this.callback(this)}}function MRadioCL(n){this.parentId=n.parentId;this.id="MRadio_"+MRadioCL.count++;MRadioCL.register(this);this.useSearch=!1;this.items=[];this.placeholder="Please Select...";this.texts={noData:"No Data Available",placeholder:"Please Select..."};this.type=0;this.size={width:"100%",height:"300px"};this.width="100%";this.bToggle=!1;this.enable=!0;this.onChange=null;this.memory_select_lst=[];this.calcOnChangeEvent=function(n){if(this.onChange!==null){let r=this.items.filter(n=>n.check===1),t=r.map(n=>n.id),i=this.memory_select_lst;if(t.length!==i.length){this.onChange(n);return}let u=t.every(function(n,t){return n===i[t]});if(u===!1)this.onChange(n)}};this.onToggle=null;this.setItems=function(n){let i=this.items.filter(n=>n.check===1).map(n=>n.html),t=0;if(t=this.items.length===0?1:i.length===this.items.length?1:i.length>0?2:0,this.items=[],t==0||t==1)for(let i=0;i<n.length;i++)n[i].id_MRadio=this.id,n[i].check=t,this.items.push(new MRadioItemCL(n[i]));else for(let t=0;t<n.length;t++){n[t].id_MRadio=this.id;var r=i.find(i=>i.html===n[t].html);n[t].check=r?1:0;this.items.push(new MRadioItemCL(n[t]))}n.length>10&&(this.useSearch=!0);this.refresh()};this.set=function(n){if(n.placeholder!==undefined&&(this.placeholder=n.placeholder),n.size!==undefined&&(this.size=n.size),n.width!==undefined&&(this.width=n.width),n.items!==undefined){this.items=[];for(let t=0;t<n.items.length;t++)n.items[t].id_MRadio=this.id,this.items.push(new MRadioItemCL(n.items[t]));n.items.length>10&&(this.useSearch=!0)}if(n.useSearch!==undefined&&(this.useSearch=n.useSearch),n.enable!==undefined&&(this.enable=n.enable,document.getElementById(this.id)!==null&&document.getElementById(this.id).setAttribute("data-enable",this.enable)),n.texts!==undefined){let t=n.texts;t.noData!==undefined&&(this.texts.noData=t.noData);t.placeholder!==undefined&&(this.texts.placeholder=t.placeholder)}n.refresh===!0&&this.createHtml();n.onChange!==undefined&&(this.onChange=n.onChange);n.onToggle!==undefined&&(this.onToggle=n.onToggle)};this.click=function(n){this.items.forEach(t=>{t.click(t.id===n?1:0)});this.showMessageSelected()};this.toggle=function(n,t){if(this.enable!=!1&&document.getElementById(this.id).getAttribute("data-toggle")!==t){if(t===undefined&&(t=document.getElementById(this.id).getAttribute("data-toggle")==="true"?"false":"true"),t==="true"){for(let n=0;n<MSelectCL.data.length;n++)MSelectCL.data[n].toggle(null,"false");for(let n=0;n<MRadioCL.data.length;n++)MRadioCL.data[n].id!==this.id&&MRadioCL.data[n].toggle(null,"false");if(this.useSearch&&(document.getElementById(`${this.id}_txtfilter`).value="",this.filter()),n!==null&&n!==undefined){var i=parseInt(this.size.height);let t=n.clientY+i>window.innerHeight?1:0;document.getElementById(`${this.id}_toggle`).setAttribute("data-direct",t)}let t=this.items.filter(n=>n.check===1);if(this.memory_select_lst=t.map(n=>n.id),this.onToggle!==null)this.onToggle("open")}else{if(this.onToggle!==null)this.onToggle("close");this.calcOnChangeEvent("toggle-close")}document.getElementById(this.id).setAttribute("data-toggle",t)}};this.filter=function(){var n=document.getElementById(`${this.id}_txtfilter`).value,i=0,t;n.trim()===""?(this.items.forEach(function(n){n.set({visible:!0})}),i=this.items.length):(n=n.toLowerCase(),this.items.forEach(function(t){var r=t.html.toLowerCase().indexOf(n)>=0?!0:!1;r&&i++;t.set({visible:r})}));t="";this.items.forEach(function(n){t+=n.createHtml()});document.getElementById(`${this.id}_items`).innerHTML=t};this.showMessageSelected=function(){function i(n,t=14,i="arial"){let r=document.createElement("span");r.style.font=i;r.style.fontSize=t+"px";r.style.height="auto";r.style.width="auto";r.style.position="absolute";r.style.whiteSpace="no-wrap";r.innerHTML=n;document.body.appendChild(r);let u=r.clientWidth;return document.body.removeChild(r),u}var t=this.items.find(n=>n.check===1),n=t!==undefined?t.html:"";let r=i(n),u=document.getElementById(`${this.id}_result`).clientWidth*.8;r>u&&(n=`1 Selected`);document.getElementById(`${this.id}_result`).innerHTML=n};this.createHtml=function(){var t,i,r,n;if(document.getElementById(this.parentId).innerHTML="",this.items.length===0){document.getElementById(this.parentId).innerHTML=`
                   <div class="mselectcl" id="${this.id}" style="width: ${this.width}">
                        <div class="_button" data-empty="true">
                            <p>${this.texts.noData}</p>
                        </div>
                    </div>
                `;return}t="";this.items.forEach(function(n){t+=n.createHtml()});i=``;this.useSearch&&(i=`
                <div class="_search">
                    <input id="${this.id}_txtfilter" onkeyup="MRadioCL.filter('${this.id}')" class="form-control" placeholder="Search for..." />
                </div>
            `);r=`
                    <div class="mselectcl" id="${this.id}" onclick="MRadioCL.stopClick(event)" data-toggle="false" data-enable="${this.enable}" style="width: ${this.width}">
                        <div class="_button" onclick="MRadioCL.toggle(event,'${this.id}')">
                            <p id="${this.id}_result">&nbsp;</p>
                            <button type="button">
                                <i class="fas fa-caret-down" style="font-size: 18px"></i>
                            </button>
                        </div>
                        <div class="_toggle" data-direct="0" id="${this.id}_toggle" style="width: ${this.size.width}; height: ${this.size.height}">
                            ${i}
                          
                            <div class="_items">
                                <ul class="_chkul" id="${this.id}_items">${t}</ul>
                            </div>
                        </div>
                    </div>
                    `;document.getElementById(this.parentId).innerHTML=r;n=parseInt(this.size.height)-10;this.useSearch&&(n=n-44);document.getElementById(`${this.id}_items`).parentNode.style.height=n+"px";this.showMessageSelected()};this.set(n);this.createHtml();this.clickOustside=function(n){var i=document.getElementById(`${this.id}`),t=n.target;do{if(t==i)return;t=t.parentNode}while(t);this.toggle(n,"false")};this.getValue=function(){let n=this.items.find(n=>n.check===1);return n!=undefined?[n]:[]};this.refresh=function(){try{this.createHtml()}catch(n){}}}var ContextMenuLst=[],LNG,loadingUI,GSELECT,PAGING,FormatDate,TimeUtil,SUpFILE,SUpMulIMG;DatePickerCL.data=[];DatePickerCL.find=function(n){return this.data.find(t=>t.id===n)};DatePickerCL.open=function(n){var t=this.find(n);t.open()};DatePickerCL.onblur=function(n){var t=this.find(n);t.onblur()};DatePickerCL.chooseDate=function(n,t){var i=this.find(n);i.chooseDate(t)};DatePickerCL.nextView=function(n,t){var i=this.find(n);i.nextView(t)};DatePickerCL.changeViewYear=function(n,t){var i=t.value,r=this.find(n);r.changeViewYear(parseInt(i))};DatePickerCL.changeViewMonth=function(n,t){var i=t.value,r=this.find(n);r.changeViewMonth(parseInt(i))};DatePickerCL.updateTime=function(n){var t=this.find(n);t.updateTime()};DatePickerCL.done=function(n){var t=this.find(n);t.done()};DatePickerCL.close=function(n){var t=this.find(n);t.close()};DatePickerCL.open=function(n,t){var i=this.find(t);i.open(n)};DatePickerCL.stopClick=function(n){n.stopPropagation()};DatePickerCL.register=function(n){this.data.length==0&&document.addEventListener("click",function(n){for(let t=0;t<DatePickerCL.data.length;t++)DatePickerCL.data[t].clickOustside(n)});this.data.push(n)};DatePickerCL.LAN={VN:{Year:"Nm",Month:"Thng",Months:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],Weeks:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],Hour:"Gi",Minute:"Pht",Second:"Giy",Unlimited:"V thi hn"},EN:{Year:"Year",Month:"Month",Months:["January","February","March","April","May","June","July","August","September","October","Novemeber","Decemeber"],Weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Hour:"Hour",Minute:"Minute",Second:"Second",Unlimited:"Indefinitely"}};String.format=function(){for(var i,t=arguments[0],n=0;n<arguments.length-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),t=t.replace(i,arguments[n+1]);return t};window.console||(console={log:function(){}});$.urlParam=function(n){var t=new RegExp("[?&]"+n+"=([^&#]*)").exec(window.location.href);return t===null?null:t[1]||0};Array.prototype.contains=function(n){for(var t in this)if(this[t]===n)return!0;return!1};Array.prototype.remove=function(n){for(var t=0;t<this.length;t++)if(this[t]===n){this.splice(t,1);break}return this};var Base64EncodeUnicode={ToBase64:function(n){try{return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(n,t){return String.fromCharCode("0x"+t)}))}catch(t){console.log("Base64EncodeUnicode tobase64 invalid: "+n)}return""},ToString:function(n){try{return decodeURIComponent(Array.prototype.map.call(atob(n),function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){console.log("Base64EncodeUnicode ToString invalid: "+n)}return""}},SUtil={Config:null,J:function(n){var t=n.indexOf("#");return t<0?$("#"+n):$(n)},Guid:function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return(new Date).getTime().toString()+n()+n()+n()+n()},GetRadomKey:function(){var n=Math.floor(Math.random()*1e4);return(new Date).getTime().toString()+"_"+n.toString()},GetRadomKeyPlus:function(n){var t=Math.floor(Math.random()*1e4);return n+(new Date).getTime().toString()+"_"+t.toString()},RefreshPage:function(){location.reload()},PerformFunc:function(n){HandleTimeout.ResetTimeout(n)},TimerCountDown:function(n,t,i){var f=t,r,u,e=setInterval(function(){r=parseInt(f/60,10);u=parseInt(f%60,10);r=r<10?"0"+r:r;u=u<10?"0"+u:u;$(n).html(r+":"+u);--f<0&&(i!==undefined&&i!==null&&i(),clearInterval(e))},1e3)},HandleMaxMin:function(n,t,i){return(n=parseInt(n),isNaN(n))?t:n>i?i:n<t?t:n},HandleMaxMinFloat:function(n,t,i){return(n=parseFloat(n),isNaN(n))?t:n>i?i:n<t?t:n},ToFixedFloat:function(n){return parseFloat(n.toFixed(2))},DefaultValue:function(n,t){return n===undefined||n===null?t:n},Default:function(n,t){return n===undefined||n===null?t:n},Base64Transparent:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",IsNaN:function(n){return n===undefined||n===null},BrowserVersion:function(){var f=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t,i,n,r,u;if(f)return console.log(" Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)"),"Opera";if(t=typeof InstallTrigger!="undefined",t)return console.log(" Firefox 1.0+"),"Firefox";try{if(i=/constructor/i.test(window.HTMLElement)||function(n){return n.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),i)return"Safari"}catch(e){}return(n=/*@cc_on!@*/!1||!!document.documentMode,n)?(console.log("Internet Explorer 6-11"),"IE"):(r=!n&&!!window.StyleMedia,r)?(console.log(" Edge 20+"),"Edge"):(u=!!window.chrome&&!!window.chrome.webstore,u)?(console.log(" Chrome 1+"),"Chrome"):"N/A"},SetCookie:function(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toGMTString();document.cookie=n+"="+t+"; "+u},GetCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""},EraseCookie:function(n){document.cookie=n+"=; Max-Age=0"},CalcSizeDialog:function(n,t){var r=window.innerHeight,i=window.innerWidth,f=0,e;i>768&&(f=15);r=r-f*2;i=i-f*2;var o=i>n?n:i,s=r>t?t:r,u=(i-o)/2;return u<0&&(u=0),e=(r-s)/2,e<0&&(u=0),{w:o,h:s,x:u,y:e}},GetBrowserDim:function(){return window.innerHeight?{w:window.innerWidth,h:window.innerHeight}:(console.log(" window.innerHeight is unidentified."),{w:document.body.clientWidth,h:document.body.clientHeight})},CropText:function(n,t){return n.length>t&&(n=String.format('<span title="{0}">{1}<\/span>',n,n.substring(0,t-3)+"...")),n},PostError:function(n){loadingUI.Close();n===undefined&&(n=LNG.GetValue("common","msg-error","Having trouble. Please try again."));MESSAGE.ok({text:n})},GetPara:function(n){var t=new RegExp("[?&]"+n+"=([^&#]*)").exec(window.location.href);return t===null?null:t[1]||0},IncludeHTML:function(){for(var n,u,i,r=document.getElementsByTagName("*"),t=0;t<r.length;t++)if(n=r[t],u=n.getAttribute("data-include-html"),u){i=new XMLHttpRequest;i.onreadystatechange=function(){this.readyState===4&&(this.status===200&&(n.innerHTML=this.responseText),this.status===404&&(n.innerHTML="Page not found."),n.removeAttribute("data-include-html"),SUtil.IncludeHTML())};i.open("GET",u,!0);i.send();return}},Wait:function(n){loadingUI.Open(n)},EndWait:function(){loadingUI.Close()},IsWait:function(){return loadingUI.isOpen},Unique:0,AutoElementId:function(){return this.Unique++,"Unique"+this.Unique}},ImageUtilities={GetCanvasHidden:function(n){var t=$("#"+n);return t.length===0&&$("body").append('<canvas id="'+n+'" class="hidden canvas-hidden"><\/canvas>'),document.getElementById(n)},ImageToBase64:function(n,t){var i=this.GetCanvasHidden("canvas_ImageToBase64"),r;return i.width=n.width,i.height=n.height,r=i.getContext("2d"),r.save(),r.clearRect(0,0,i.width,i.height),r.translate(i.width/2,i.height/2),r.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),r.restore(),t==="png"?i.toDataURL("image/png"):i.toDataURL("image/jpeg")},FixImageWithSize:function(n,t){function r(){var i=t.width/n.width,r=t.width,u=parseInt(n.height*i);return{scale:i,width:r,height:u}}function u(){var i=t.height/n.height,r=t.height,u=n.width*i;return{scale:i,width:u,height:r}}var i;return n.width>t.width&&(i=r(),i.width<=t.width&&i.height<=t.height)?i:n.height>t.height&&(i=u(),i.width<=t.width&&i.height<=t.height)?i:{scale:1,width:n.width,height:n.height}},ImageToBase64Resize:function(n,t,i){var f=n.width,e=n.height,o=n.width/n.height,s,r,u;return n.width>t.width&&(f=t.width,s=n.width/t.height,e=f/o),r=this.GetCanvasHidden("canvas_ImageToBase64"),r.width=f,r.height=e,u=r.getContext("2d"),u.save(),u.clearRect(0,0,r.width,r.height),u.drawImage(n,0,0,f,e),u.restore(),i==="png"?r.toDataURL("image/png"):r.toDataURL("image/jpeg")},ImageToBase64ResizeVsRotate:function(n,t,i,r){var e=n.width,s=n.height,h=n.width/n.height,c,o,u,f;return n.width>t.width&&(e=t.width,c=n.width/t.height,s=e/h),o=e/n.width,u=this.GetCanvasHidden("canvas_ImageToBase64"),u.width=e,u.height=s,f=u.getContext("2d"),f.save(),f.clearRect(0,0,u.width,u.height),f.translate(u.width/2,u.height/2),f.scale(o,o),f.rotate(r*Math.PI/180),f.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),f.restore(),i==="png"?u.toDataURL("image/png"):u.toDataURL("image/jpeg")},LimitSizeOfImage:function(n,t,i){var u=n.width,e=n.height,s=n.width/n.height,h,r,f,o;return n.width>t.width&&(u=t.width,h=n.width/t.height,e=u/s),r=this.GetCanvasHidden("canvas_ImageToBase64"),r.width=u,r.height=e,f=r.getContext("2d"),f.save(),f.clearRect(0,0,r.width,r.height),f.drawImage(n,0,0,u,e),f.restore(),o="",o=i==="png"?r.toDataURL("image/png"):r.toDataURL("image/jpeg"),{base64:o,width:u,height:e}},ImagetoCanvas:function(n,t){var i,r,u,f;return t===undefined&&(t="imagetoCanvas"),i=ImageUtilities.GetCanvasHidden(t),r=i.getContext("2d"),i.width=n.width,i.height=n.height,u=i.width/2,f=i.height/2,r.save(),r.clearRect(0,0,i.width,i.height),r.translate(u,f),r.drawImage(n,-u,-f,i.width,i.height),r.restore(),i},CropImage:function(n,t,i,r){var f,u;r===undefined&&(r="canvas_crop");f=this.ImagetoCanvas(n);u=this.GetCanvasHidden(r);u.width=Math.abs(i.x-t.x);u.height=Math.abs(i.y-t.y);var e=u.getContext("2d"),o=f.getContext("2d"),s=Math.min(i.x,t.x),h=Math.min(i.y,t.y),c=o.getImageData(s,h,u.width,u.height);return e.putImageData(c,0,0),u.toDataURL("image/jpeg")},CropImageCircle:function(n,t,i,r){var s,f,e,o;r===undefined&&(r="canvas_crop");s=this.ImagetoCanvas(n);f=this.GetCanvasHidden(r);f.width=Math.abs(i.x-t.x);f.height=Math.abs(i.y-t.y);var h=s.getContext("2d"),c=Math.min(i.x,t.x),l=Math.min(i.y,t.y),a=h.getImageData(c,l,f.width,f.height),u=f.getContext("2d");return u.putImageData(a,0,0),e=f.width/2,o=f.height/2,u.fillStyle="black",u.beginPath(),u.arc(e,o,e,0,Math.PI),u.lineTo(0,f.width),u.lineTo(f.width,f.height),u.closePath(),u.fill(),u.beginPath(),u.arc(e,o,e,Math.PI,2*Math.PI),u.lineTo(f.width,0),u.lineTo(0,0),u.closePath(),u.fill(),f.toDataURL("image/jpeg")},ScaleImage:function(n,t){var i=n.width/parseFloat(t.width),r=t.height*i;return r>n.height&&(i=n.height/parseFloat(t.height)),i=i.toFixed(2),parseFloat(i)}},InputValidate={OnKeyPressAvoidSpecialChars:function(n,t){var i,r,u;return(n||(n=window.event),n.keyCode?i=n.keyCode:n.which&&(i=n.which),r=String.fromCharCode(i),u=t.indexOf(r),u>=0)?!1:!0},OnKeyPressAllowChars:function(n,t){var i,r,u;return(n||(n=window.event),n.keyCode?i=n.keyCode:n.which&&(i=n.which),r=String.fromCharCode(i),u=t.indexOf(r),u>=0)?!0:!1},IsInteger:function(n){return InputValidate.OnKeyPressAllowChars(n,"0123456789")},IsNumber:function(n){return InputValidate.OnKeyPressAllowChars(n,"0123456789.")},IsPhone:function(n){return InputValidate.OnKeyPressAllowChars(n,"0123456789-+() ")},IsAddress:function(n){return InputValidate.OnKeyPressAvoidSpecialChars(n,'~!@#$%^&*()+|{}[]:;"?><?\\`')},AvoidSpecialChars:function(n){return InputValidate.OnKeyPressAvoidSpecialChars(n,"~!@#$%^&*()+|{}[]:;\"'?><?/\\,.-`")},IsFax:function(n){return InputValidate.OnKeyPressAllowChars(n,"0123456789-+() ")},IsUserName:function(n){return InputValidate.OnKeyPressAllowChars(n,"0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM_")},IsSSN:function(n){return InputValidate.OnKeyPressAllowChars(n,"0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM")},RenderHtml:function(){$("input[data-is-integer]").keypress(function(n){return InputValidate.IsInteger(n)});$("input[data-is-number]").keypress(function(n){return InputValidate.IsNumber(n)});$("input[data-is-phone]").keypress(function(n){return InputValidate.IsPhone(n)});$("input[data-is-address]").keypress(function(n){return InputValidate.IsAddress(n)});$("textarea[data-is-address]").keypress(function(n){return InputValidate.IsAddress(n)});$("input[data-avoid-specialchars]").keypress(function(n){return InputValidate.AvoidSpecialChars(n)});$("input[data-is-fax]").keypress(function(n){return InputValidate.IsFax(n)});$("input[data-is-username]").keypress(function(n){return InputValidate.IsUserName(n)});$("input[data-is-ssn]").keypress(function(n){return InputValidate.IsSSN(n)})},RegPhone:function(n){return/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(n)},RegEmail:function(n){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(n)},RegPassword:function(n){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$^+=!*()@%&]).{5,20}$/g.test(n)},RegUsername:function(n){return/^[A-Za-z0-9_]{4,20}$/g.test(n)}};LNG={ImAChildPage:!1,Sections:[],FileName:"en.xml",Set:function(n){localStorage.LNG!==n?(localStorage.LNG=n,LNG.FileName=localStorage.LNG,LNG.ReLoad()):LNG.ReLoad()},Lock:!1,ReLoad:function(){if(LNG.FileName=localStorage.LNG,LNG.Lock){console.log("Lock Get Language.");return}LNG.Lock=!0;var n=`${SUtil.Config.URL}LNG/file/${LNG.FileName}?ver=${SUtil.Config.Version}`;$.ajax({url:n,type:"get",async:!1,success:function(n){LNG.Lock=!1;LNG.Parse(n);LNG.RenderHTML()},error:function(){LNG.Lock=!1;console.log("Load Text Failed")}})},Parse:function(n){var r=n,i,t;for(LNG.Sections=[],i=r.getElementsByTagName("profile")[0],t=0;t<i.children.length;t++)LNG.Sections.push(new LNG_SECTIONCL(i.children[t]))},Clear:function(){LNG.Sections=[]},View:function(){if(LNG.ImAChildPage)return parent.LNG.View();for(var n=0;n<LNG.Sections.length;n++)console.log(LNG.Sections[n])},GetSectionByKey:function(n){for(var t=0;t<LNG.Sections.length;t++)if(LNG.Sections[t].Name===n)return LNG.Sections[t];return null},GetValue:function(n,t,i){var r,u;return LNG.ImAChildPage?parent.LNG.GetValue(n,t,i):(r=LNG.GetSectionByKey(n),r===null)?i!==undefined?i:"&nbsp;":(u=r.GetLNG_ENTRYCLByKey(t),u===null)?i!==undefined?i:"&nbsp;":u.Text},Get:function(n,t,i=""){return this.GetValue(n,t,i)},GetAttr:function(n){var t=n.split("|");return t.length<2?"":this.GetValue(t[0],t[1],"")},RenderHTML:function(){var t,n,e,u,i,o,f,r,s;for(loadingUI.Create(),t=$("[data-lng]"),n=0;n<t.length;n++)e=LNG.GetAttr($(t[n]).attr("data-lng")),e.length>0?$(t[n]).html(e):console.log("LNG - Not Found: "+$(t[n]).attr("data-lng"));for(u=$("[data-lng-title]"),i=0;i<u.length;i++)o=LNG.GetAttr($(u[i]).attr("data-lng-title")),o.length>0?$(u[i]).attr("title",o):console.log("Exception: lng");for(f=$("[data-lng-placeholder]"),r=0;r<f.length;r++)s=LNG.GetAttr($(f[r]).attr("data-lng-placeholder")),s.length>0?$(f[r]).attr("placeholder",s):console.log("Exception: lng");InputValidate.RenderHtml()}};loadingUI={isOpen:!1,Open:function(n){n===undefined&&(n=LNG.GetValue("button","pleasewait","Please Wait..."));n+='<i onclick="loadingUI.Close()" class="fa fa-times _btn-close"><\/i>';$("#dvWait-msg").html(n);$("#dvWait").css("display","flex");this.isOpen=!0},Close:function(){$("#dvWait").css("display","none");this.isOpen=!1},Create:function(){if(!($("#dvWait").length>0))$("body").append('<div id="dvWait">                            <table>                                <tr>                                    <td><i style="font-size: 50px" class="fa fa-spinner fa-spin" aria-hidden="true"><\/i><\/td>                                <\/tr>                                <tr>                                    <td id="dvWait-msg">Please Wait...<\/td>                                <\/tr>                            <\/table>                        <\/div >')}};var DIALOG={data:[],TYPE:{DIALOG_S:"_modal-dia_s",DIALOG_M:"_modal-dia_m",DIALOG_L:"_modal-dia_l"},show:function(n){n.type=SUtil.Default(n.type,DIALOG.TYPE.DIALOG_M);var t=this.data.find(t=>t.id===n.id);return t===undefined&&(t=new ModalCL(n)),t.open(),t},btnFooterClick:function(n,t){try{var i=this.data.find(t=>t.id===n);i.buttons[t].callback()}catch(r){}},find:function(n){return this.data.find(t=>t.id===n)}},MESSAGE={convert:function(n){return n.text!==undefined&&(n.html=`<p style="text-align:center; margin: 0px; padding: 20px 10px">${n.text}</p>`),n.title=SUtil.Default(n.title,"MSYSTEM"),n.type=SUtil.Default(n.type,DIALOG.TYPE.DIALOG_S),n},ok:function(n){n=this.convert(n);var t=new ButtonCL({html:"Close",callback:function(){n.callback!==undefined&&n.callback()},closeAfterClick:!0});return n.buttons=[t],DIALOG.show(n)},show:function(n){return n=this.convert(n),DIALOG.show(n)}},GMultiselect={CountDiv:0,Data:[],Add:function(n){var t=$("#mlMultichkBG");return t.length===0&&$("body").append('<div id="mlMultichkBG"><div><\/div><\/div>'),this.CountDiv++,n.ID="smulsel-"+this.CountDiv.toString(),this.Data.push(n),n.ID},Find:function(n){for(var t=0;t<this.Data.length;t++)if(this.Data[t].ID===n)return this.Data[t];return null},ClickItem:function(n,t){var i=this.Find(n);if(i===null){console.log("Not Found Multichk");return}i.ItemClick(t)},Click:function(n,t){var i=this.Find(n);i.Set({extend:t,refresh:!0})},ClickPopup:function(n,t){var i=this.Find(n);i.Set({extend:!1,refresh:!0,resetoldcheck:!t});$("#mlMultichkBG").css("display","none");t&&i.OnChange!==null&&i.OnChange()}};GSELECT={TYPE:{POPUP:"POPUP",DROP_DOWN:"DROP_DOWN",TOGGLE:"TOGGLE",LIST:"LIST"},KIND:{CHECK:0,RADIO:1},CountDiv:0,Data:[],Add:function(n){return this.CountDiv===0&&document.addEventListener("click",function(){for(var n=0;n<GSELECT.Data.length;n++)GSELECT.Data[n].Extend&&GSELECT.Data[n].Type===GSELECT.TYPE.DROP_DOWN&&GSELECT.Data[n].Set({Extend:!1,Refresh:!0})}),this.CountDiv++,n.ID="gsel-"+this.CountDiv.toString(),this.Data.push(n),n.ID},Find:function(n){for(var t=0;t<this.Data.length;t++)if(this.Data[t].ID===n)return this.Data[t];return null},ClickItem:function(n,t,i){n.stopPropagation();var r=this.Find(t);if(r===null){console.log("Not Found Multichk");return}r.ItemClick(i)},Click:function(n,t,i){n.stopPropagation();var r=this.Find(t);(i===undefined||i===null)&&(i=!r.Extend);r.Click(n)},ClickPopup:function(n,t){var i=this.Find(n);i.Set({extend:!1,Refresh:!0,resetoldcheck:!t});$("#mlMultichkBG").css("display","none");t&&i.OnChange!==null&&i.OnChange()},StopClick:function(n){n.stopPropagation()},Filter:function(n,t){var i=this.Find(t),r=$(n).val().toLowerCase();i.Filter(r)},ICON:{Check:'<i class="fas fa-check-square" aria-hidden="true"><\/i>',UnCheck:'<i class="far fa-square" aria-hidden="true"><\/i>',UnCheckALL:'<i class="far fa-minus-square"><\/i>',CheckCircle:'<i class="fas fa-check-circle" aria-hidden="true"><\/i>',UnCheckCircle:'<i class="far fa-circle" aria-hidden="true"><\/i>'}};var ENoticeType={Black:"son-notice-black",Light:"son-notice-light",Info:"son-notice-info",Warning:"son-notice-warning",Alert:"son-notice-alert",Success:"son-notice-success",MSAlert:"son-notice-alert-ms"},ENoticePosition={TopLeft:"topleft",TopRight:"topright",BottomLeft:"bottomleft",BottomRight:"bottomright",Center:"center"},NoticeHTML={DATA:[],find:function(n){for(var t=0;t<this.DATA.length;t++)if(this.DATA[t].ID===n)return this.DATA[t];return null},push:function(n){this.DATA.push(n)},WARNING:function(n){return n.duration=SUtil.Default(n.duration,5e3),n.type=SUtil.Default(n.type,ENoticeType.Warning),n.position=SUtil.Default(n.position,ENoticePosition.Center),n.closeBtn=SUtil.Default(n.closeBtn,!0),n.iconFont=SUtil.Default(n.iconFont,'<i class="fa fa-exclamation-triangle"><\/i>'),NoticeHTML.Show(n)},Warning:function(n){return n.duration=SUtil.Default(n.duration,5e3),n.type=SUtil.Default(n.type,ENoticeType.Warning),n.position=SUtil.Default(n.position,ENoticePosition.BottomRight),n.iconFont=SUtil.Default(n.iconFont,'<i class="fa fa-exclamation-triangle"><\/i>'),NoticeHTML.Show(n)},SUCCESS:function(n){return n.duration=SUtil.Default(n.duration,5e3),n.type=SUtil.Default(n.type,ENoticeType.Success),n.position=SUtil.Default(n.position,ENoticePosition.Center),n.iconFont=SUtil.Default(n.iconFont,'<i class="fa fa-check-circle" aria-hidden="true"><\/i>'),n.closeBtn=SUtil.Default(n.closeBtn,!0),NoticeHTML.Show(n)},Success:function(n){return n.duration=SUtil.Default(n.duration,5e3),n.type=SUtil.Default(n.type,ENoticeType.Success),n.position=SUtil.Default(n.position,ENoticePosition.BottomRight),n.iconFont=SUtil.Default(n.iconFont,'<i class="fa fa-check-circle" aria-hidden="true"><\/i>'),NoticeHTML.Show(n)},INFO:function(n){return n.duration=SUtil.Default(n.duration,5e3),n.type=SUtil.Default(n.type,ENoticeType.Info),n.position=SUtil.Default(n.position,ENoticePosition.Center),n.iconFont=SUtil.Default(n.iconFont,'<i class="fa fa-info" aria-hidden="true"><\/i>'),n.closeBtn=SUtil.Default(n.closeBtn,!0),NoticeHTML.Show(n)},Info:function(n){return n.duration=SUtil.Default(n.duration,5e3),n.type=SUtil.Default(n.type,ENoticeType.Info),n.position=SUtil.Default(n.position,ENoticePosition.BottomRight),NoticeHTML.Show(n)},Show:function(n){var t=this.DATA.find(t=>t.message===n.msg);if(t===undefined||t===null)return new NoticeCL(n)},Close:function(n){var i=this.find(n),t;if(i!==null)for(i.Remove(),t=0;t<this.DATA.length;t++)if(this.DATA[t].ID===n){this.DATA.splice(t,1);break}},MESSAGE:function(n){return n.duration=SUtil.Default(n.duration,1e4),n.type=SUtil.Default(n.type,ENoticeType.Light),n.iconFont=SUtil.Default(n.iconFont,'<i class="fa fa-exclamation-circle" aria-hidden="true"><\/i>'),n.class=SUtil.Default(n.class,"notice-msg"),n.position=ENoticePosition.Center,n.closeBtn=SUtil.Default(n.closeBtn,!0),NoticeHTML.Show(n)},closeAfter:function(n,t,i){var f=(new Date).getTime()-n,u=f*100/t,r;if(u>=100){NoticeHTML.Close(i.ID);return}r=document.getElementById("notice-dur-"+i.ID);r!==undefined&&r!==null&&(r.style.width=parseInt(u)+"%",setTimeout(function(){NoticeHTML.closeAfter(n,t,i)},50))}};(function(){var n=function(n){return{from:function(t){return{to:function(i){return parseInt(n,t).toString(i)}}}}};n.bin2dec=function(t){return n(t).from(2).to(10)};n.bin2hex=function(t){return n(t).from(2).to(16)};n.dec2bin=function(t){return n(t).from(10).to(2)};n.dec2hex=function(t){return n(t).from(10).to(16)};n.hex2bin=function(t){return n(t).from(16).to(2)};n.hex2dec=function(t){return n(t).from(16).to(10)};this.ConvertBase=n})(this);PAGING={data:[],find:function(n){return this.data.find(t=>t.id===n)},next:function(n,t){var i=this.find(n);i.next(t)},changePageSize:function(n,t){var i=parseInt(n.value),r=this.find(t);r.changePageSize(i)},gotoPage:function(n){var t=this.find(n);t.gotoPage()}};FormatDate="dd/MM/yyyy";TimeUtil={ParseDate:function(n){try{var t=/-?\d+/.exec(n);return new Date(parseInt(t[0]))}catch(r){return""}},TicksToDateLocal:function(n){var t,i,r;try{return t=parseInt(n),t=t-621355968000000000,i=t/1e4,r=new Date(i),r}catch(u){return""}},TicksToStringLocal:function(n){var t,i,r;try{return t=parseInt(n),t=t-621355968000000000,i=t/1e4,r=new Date(i),r.toString(FormatDate+" HH:mm:ss")}catch(u){return""}},TicksToStringDateLocal:function(n){var t,i,r;try{return n===undefined||n===0?"":(t=parseInt(n),t=t-621355968000000000,i=t/1e4,r=new Date(i),r.toStringNCIC(FormatDate))}catch(u){return""}},TicksToStringTimeLocal:function(n){var t,i,r;try{return t=parseInt(n),t=t-621355968000000000,i=t/1e4,r=new Date(i),r.toString("HH:mm:ss")}catch(u){return""}},BootrapPickerValueToDate:function(n){try{var t=n.split("/"),i=t[2].split(" "),f=i[1].split(":"),e="",u=FormatDate.toLowerCase(),r="{0}/{1}/{2}";return e=u==="mm/dd/yyyy"?String.format(r,t[0],t[1],i[0]):u==="dd/mm/yyyy"?String.format(r,t[1],t[0],i[0]):u==="yyyy/mm/dd"?String.format(r,t[1],i[0],t[0]):u==="yyyy/dd/mm"?String.format(r,i[0],t[1],t[0]):String.format(r,t[0],t[1],i[0]),e+=String.format(" {0}:{1}:{2}",f[0],f[1],f[2]),Date.parse(e)}catch(o){return null}},LeftPad:function(n,t){for(var i=n+"";i.length<t;)i="0"+i;return i},DateToTextNumber:function(n){var t=this.LeftPad(n.getFullYear(),4),i=this.LeftPad(n.getMonth()+1,2),r=this.LeftPad(n.getDate(),2),u=this.LeftPad(n.getHours(),2),f=this.LeftPad(n.getMinutes(),2),e=this.LeftPad(n.getSeconds(),2);return t+i+r+u+f+e},DateToTextNumberUTC:function(n){var t=this.LeftPad(n.getUTCFullYear(),4),i=this.LeftPad(n.getUTCMonth()+1,2),r=this.LeftPad(n.getUTCDate(),2),u=this.LeftPad(n.getUTCHours(),2),f=this.LeftPad(n.getUTCMinutes(),2),e=this.LeftPad(n.getUTCSeconds(),2);return t+i+r+u+f+e},TextNumberToDateLocal:function(n,t){var i=parseInt(n);if(i<=0)return new Date(0,0,0);var r=i/1e10,u=i%1e10/1e8,f=i%1e8/1e6,e=i%1e6/1e4,o=i%1e4/100,s=i%100;return t===!0?new Date(Date.UTC(r,u-1,f,e,o,s)):new Date(r,u-1,f,e,o,s)},DateToTextFormat:function(n,t){t=t===undefined?FormatDate.toLowerCase():t.toLowerCase();var i="{0}/{1}/{2}",o=t.split(" "),e=o[0],s="";o.length>1&&(s=o[1]);var r=this.LeftPad(n.getFullYear(),4),u=this.LeftPad(n.getMonth()+1,2),f=this.LeftPad(n.getDate(),2),h=this.LeftPad(n.getHours(),2),c=this.LeftPad(n.getMinutes(),2),l=this.LeftPad(n.getSeconds(),2);return ms=e==="mm/dd/yyyy"?String.format(i,u,f,r):e==="dd/mm/yyyy"?String.format(i,f,u,r):e==="yyyy/mm/dd"?String.format(i,r,u,f):e==="yyyy/dd/mm"?String.format(i,r,f,u):String.format(i,u,f,r),s.length>0&&(ms+=String.format(" {0}:{1}:{2}",h,c,l)),ms},TextFormatToDate:function(n,t){var o,i,e;try{t=t===undefined?FormatDate.toLowerCase():t.toLowerCase();let l=t.split(" "),a=l[0],v=l.length>1?l[1]:"";o=n.split(" ");i=o[0].split("/");v=v.toLowerCase();var r=0,u=0,f=0;a==="dd/mm/yyyy"?(f=i[0],u=i[1],r=i[2]):a==="yyyy/mm/dd"?(f=i[2],u=i[1],r=i[0]):a==="yyyy/dd/mm"?(f=i[1],u=i[2],r=i[0]):(f=i[1],u=i[0],r=i[2]);var s=0,h=0,c=0;return v.length>0&&(e=o[1].split(":"),s=parseInt(e[0]),h=parseInt(e[1]),c=parseInt(e[2])),new Date(parseInt(r),parseInt(u)-1,parseInt(f),s,h,c)}catch(l){return null}},DateToTextYYYMMDD:function(n){return String.format("{0}-{1}-{2}",TimeUtil.LeftPad(n.getUTCFullYear(),4),TimeUtil.LeftPad(n.getMonth()+1,2),TimeUtil.LeftPad(n.getDate(),2))},secondsToTimeString:function(n,t){t==undefined&&(t="{0}:{1}:{2}");var i=new Date(n*1e3),u=i.getUTCDate()-1,f=i.getUTCHours(),e=i.getUTCMinutes(),n=i.getSeconds(),r=String.format(t,this.LeftPad(f,2),this.LeftPad(e,2),this.LeftPad(n,2));return u>0&&(r=u+" day(s) "+r),r},textToDate:function(n,t="mm/dd/yyyy hh:mm:ss"){var i,f,r,u;try{t=t.toLowerCase();i=t.split(" ");f=n.split(" ");function e(n,t,i="/"){try{var s=t.toLowerCase(),r=s.split(i),u=n.split(i),f=r.indexOf("mm"),e=r.indexOf("dd"),o=r.indexOf("yyyy");function a(n){return n=parseInt(n),n<0&&(n=0),Number.isNaN(n)&&(n=0),n}var h=o>=0?a(u[o]):0,c=f>=0?a(u[f])-1:0,l=e>=0?a(u[e]):0;return{year:h,month:c,date:l}}catch(a){return{year:0,month:0,date:0}}}function o(n,t,i=":"){try{var s=t.toLowerCase(),r=s.split(i),u=n.split(i),f=r.indexOf("hh"),e=r.indexOf("mm"),o=r.indexOf("ss");function a(n){return n=parseInt(n),n<0&&(n=0),Number.isNaN(n)&&(n=0),n}var h=f>=0?a(u[f]):0,c=e>=0?a(u[e]):0,l=o>=0?a(u[o]):0;return{hours:h,minutes:c,seconds:l}}catch(a){return{hours:0,minutes:0,seconds:0}}}return r={year:0,month:0,date:0},u={hours:0,minutes:0,seconds:0},i.length===1&&(t.indexOf("ss")>=0||t.indexOf("hh")>=0?(u=o(f[0],i[0]),r={year:1901,month:1,date:1}):r=e(f[0],i[0])),i.length>1&&(r=e(f[0],i[0]),u=o(f[1],i[1])),new Date(r.year,r.month,r.date,u.hours,u.minutes,u.seconds)}catch(e){return null}},dateToText:function(n,t="mm/dd/yyyy hh:mm:ss"){try{t=t.toLowerCase();function r(n,t,i=":"){try{var r=t.split(i),u=r.indexOf("hh"),f=r.indexOf("mm"),e=r.indexOf("ss");let s=[];u>=0&&s.push(n.getHours());f>=0&&s.push(n.getMinutes());e>=0&&s.push(n.getSeconds());let o="";for(let n=0;n<s.length;n++)o+=TimeUtil.LeftPad(s[n],2)+":";return o.length>0&&(o=o.substring(0,o.length-1)),o}catch(o){return""}}function u(n,t,i="/"){try{var r=t.split(i),u=r.indexOf("yyyy"),f=r.indexOf("mm"),e=r.indexOf("dd");let s=[{index:u,name:"yyyy"},{index:f,name:"mm"},{index:e,name:"dd"},];s.sort((n,t)=>n.index<t.index?-1:n.index>t.index?1:0);let o="";for(let t=0;t<s.length;t++)if(!(s.index<0))switch(s[t].name){case"yyyy":o+=TimeUtil.LeftPad(n.getFullYear(),4)+i;break;case"mm":o+=TimeUtil.LeftPad(n.getMonth()+1,2)+i;break;case"dd":o+=TimeUtil.LeftPad(n.getDate(),2)+i}return o.length>0&&(o=o.substring(0,o.length-1)),o}catch(o){return""}}var i=t.split(" ");return i.length==1?t.indexOf("ss")>=0||t.indexOf("hh")>=0?r(n,i[0]):u(n,i[0]):u(n,i[0])+" "+r(n,i[1])}catch(r){return""}},dateToTextNumber:function(n,t=false){if(t){var i=this.LeftPad(n.getUTCFullYear(),4),r=this.LeftPad(n.getUTCMonth()+1,2),u=this.LeftPad(n.getUTCDate(),2),f=this.LeftPad(n.getUTCHours(),2),e=this.LeftPad(n.getUTCMinutes(),2),o=this.LeftPad(n.getUTCSeconds(),2);return i+r+u+f+e+o}var i=this.LeftPad(n.getFullYear(),4),r=this.LeftPad(n.getMonth()+1,2),u=this.LeftPad(n.getDate(),2),f=this.LeftPad(n.getHours(),2),e=this.LeftPad(n.getMinutes(),2),o=this.LeftPad(n.getSeconds(),2);return i+r+u+f+e+o},textNumberToDate:function(n,t=false){var i=parseInt(n);if(i<=0)return new Date(0,0,0);var r=i/1e10,u=i%1e10/1e8,f=i%1e8/1e6,e=i%1e6/1e4,o=i%1e4/100,s=i%100;return t===!0?new Date(Date.UTC(r,u-1,f,e,o,s)):new Date(r,u-1,f,e,o,s)}};Date.prototype.toStringNCIC=function(){var i=this.getFullYear().toString(),n=(this.getMonth()+1).toString(),t=this.getDate().toString(),r=FormatDate.toLowerCase();return r==="mm/dd/yyyy"?(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0])+"/"+i:r==="dd/mm/yyyy"?(t[1]?t:"0"+t[0])+"/"+(n[1]?n:"0"+n[0])+"/"+i:r==="yyyy/mm/dd"?i+"/"+(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0]):r==="yyyy/dd/mm"?i+"/"+(t[1]?t:"0"+t[0])+"/"+(n[1]?n:"0"+n[0]):(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0])+"/"+i};Date.prototype.toISOStringTimeNCIC=function(){var i=this.getUTCFullYear().toString(),n=(this.getUTCMonth()+1).toString(),t=this.getUTCDate().toString(),u=this.getUTCHours().toString(),f=this.getUTCMinutes().toString(),e=this.getUTCSeconds().toString(),r=FormatDate.toLowerCase(),o="",s;return o=r==="mm/dd/yyyy"?(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0])+"/"+i:r==="dd/mm/yyyy"?(t[1]?t:"0"+t[0])+"/"+(n[1]?n:"0"+n[0])+"/"+i:r==="yyyy/mm/dd"?i+"/"+(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0]):r==="yyyy/dd/mm"?i+"/"+(t[1]?t:"0"+t[0])+"/"+(n[1]?n:"0"+n[0]):(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0])+"/"+i,s=(u[1]?u:"0"+u[0])+":"+(f[1]?f:"0"+f[0])+":"+(e[1]?e:"0"+e[0]),o+" "+s};Date.prototype.toStringTimeNCIC=function(){var i=this.getFullYear().toString(),n=(this.getMonth()+1).toString(),t=this.getDate().toString(),u=this.getHours().toString(),f=this.getMinutes().toString(),e=this.getSeconds().toString(),r=FormatDate.toLowerCase(),o="",s;return o=r==="mm/dd/yyyy"?(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0])+"/"+i:r==="dd/mm/yyyy"?(t[1]?t:"0"+t[0])+"/"+(n[1]?n:"0"+n[0])+"/"+i:r==="yyyy/mm/dd"?i+"/"+(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0]):r==="yyyy/dd/mm"?i+"/"+(t[1]?t:"0"+t[0])+"/"+(n[1]?n:"0"+n[0]):(n[1]?n:"0"+n[0])+"/"+(t[1]?t:"0"+t[0])+"/"+i,s=(u[1]?u:"0"+u[0])+":"+(f[1]?f:"0"+f[0])+":"+(e[1]?e:"0"+e[0]),o+" "+s};SUpFILE={Data:[],Find:function(n){for(var t=0;t<this.Data.length;t++)if(this.Data[t].Id===n)return this.Data[t];return null},Click:function(n){var i=$(n).attr("id"),t=this.Find(i);t!==null&&t.Click()},Browse:function(n){var i=n.currentTarget.attributes.ms.nodeValue,t=this.Find(i);t!==null&&t.Browse(n)}};SUpMulIMG={LockClick:!1,Data:[],Find:function(n){for(var t=0;t<this.Data.length;t++)if(this.Data[t].Id===n)return this.Data[t];return null},Click:function(n){if(!this.LockClick){var i=$(n).attr("id"),t=this.Find(i);t!==null&&t.Click()}},Browse:function(n){var i=n.currentTarget.attributes.ms.nodeValue,t=this.Find(i);t!==null&&t.Browse(n)},Delete:function(n){this.LockClick=!0;var i=$(n).attr("data-id"),t=this.Find(i);t!==null&&(t.Set({Delete:$(n).attr("data-imgid")}),setTimeout(function(){SUpMulIMG.LockClick=!1},200))},Drop:function(n){var e,u,r,t,f,i;if(n.preventDefault(),e=n.currentTarget.attributes.id.nodeValue,u=SUpMulIMG.Find(e),u!==null){if(n.dataTransfer.items){for(r=[],t=0;t<n.dataTransfer.items.length;t++)n.dataTransfer.items[t].kind==="file"&&(f=n.dataTransfer.items[t].getAsFile(),console.log("... file["+t+"].name = "+f.name),r.push(f));r.length>0&&u.AddFile(r,!1,0)}else for(i=0;i<n.dataTransfer.files.length;i++)console.log("... file["+i+"].name = "+n.dataTransfer.files[i].name);console.log("Removing drag data");n.dataTransfer.items?n.dataTransfer.items.clear():n.dataTransfer.clearData()}},DragOver:function(n){n.preventDefault()}};SUpMFILECL.data=[];SUpMFILECL.click=function(n){var t=this.data.find(t=>t.id===n.id);t.click()};SUpMFILECL.browse=function(n){var t=n.currentTarget.attributes.ms.nodeValue,i=this.data.find(n=>n.id===t);i.browse(n)};SUpMFILECL.drop=function(n){var u,i,r,t,f;if((n.preventDefault(),u=n.currentTarget.attributes.id.nodeValue,i=this.data.find(n=>n.id===u),i!==null)&&n.dataTransfer.items){for(r=[],t=0;t<n.dataTransfer.items.length;t++)n.dataTransfer.items[t].kind==="file"&&(f=n.dataTransfer.items[t].getAsFile(),r.push(f));r.forEach(function(n){i.addFile(n)})}};SUpMFILECL.dragOver=function(n){n.preventDefault()};SUpMFILECL.delete=function(n,t,i){i.stopPropagation();var r=this.data.find(n=>n.id===t);r.delete(n)};SUpMFILECL.COLOR={DEFAULT:0,ERROR:1,DONE:2};MSelectCL.data=[];MSelectCL.register=function(n){this.data.length==0&&document.addEventListener("click",function(n){MSelectCL.data.forEach(t=>{t.clickOustside(n)})});this.data.push(n)};MSelectCL.find=function(n){return this.data.find(t=>t.id===n)};MSelectCL.count=0;MSelectCL.stopClick=function(n){n.stopPropagation()};MSelectCL.click=function(n,t,i){n!=null&&n.stopPropagation();var r=this.find(t);r.click(i)};MSelectCL.filter=function(n){var t=this.find(n);t.filter()};MSelectCL.toggle=function(n,t){var i=this.find(t);i.toggle(n)};MRadioCL.data=[];MRadioCL.register=function(n){this.data.length==0&&document.addEventListener("click",function(n){MRadioCL.data.forEach(t=>{t.clickOustside(n)})});this.data.push(n)};MRadioCL.find=function(n){return this.data.find(t=>t.id===n)};MRadioCL.count=0;MRadioCL.stopClick=function(n){n.stopPropagation()};MRadioCL.click=function(n,t,i){n!=null&&n.stopPropagation();var r=this.find(t);r.click(i)};MRadioCL.filter=function(n){var t=this.find(n);t.filter()};MRadioCL.toggle=function(n,t){var i=this.find(t);i.toggle(n)};